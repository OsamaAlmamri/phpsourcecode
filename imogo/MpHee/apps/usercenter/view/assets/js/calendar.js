var $$=function(a){return"string"==typeof a?document.getElementById(a):a};var Class={create:function(){return function(){this.initialize.apply(this,arguments)}}};Object.extend=function(a,c){for(var b in c){a[b]=c[b]}return a};var Calendar=Class.create();Calendar.prototype={initialize:function(a,b){this.Container=$$(a);this.Days=[];this.SetOptions(b);this.Year=this.options.Year;this.Month=this.options.Month;this.SelectDay=this.options.SelectDay?new Date(this.options.SelectDay):null;this.onSelectDay=this.options.onSelectDay;this.onToday=this.options.onToday;this.onFinish=this.options.onFinish;this.Draw()},SetOptions:function(a){this.options={Year:new Date().getFullYear(),Month:new Date().getMonth()+1,SelectDay:null,onSelectDay:function(){},onToday:function(){},onFinish:function(){}};Object.extend(this.options,a||{})},PreMonth:function(){var a=new Date(this.Year,this.Month-2,1);this.Year=a.getFullYear();this.Month=a.getMonth()+1;this.Draw()},NextMonth:function(){var a=new Date(this.Year,this.Month,1);this.Year=a.getFullYear();this.Month=a.getMonth()+1;this.Draw()},Draw:function(){var b=[];for(var e=1,c=new Date(this.Year,this.Month-1,1).getDay();e<=c;e++){b.push("")}for(var e=1,f=new Date(this.Year,this.Month,0).getDate();e<=f;e++){b.push(e)}var j=document.createDocumentFragment();this.Days=[];while(b.length>0){var h=document.createElement("tr");for(var e=1;e<=7;e++){var a=document.createElement("td");a.innerHTML="";if(b.length>0){var g=b.shift();a.innerHTML=g;if(g>0){this.Days[g]=a;if(this.IsSame(new Date(this.Year,this.Month-1,g),new Date())){this.onToday(a)}if(this.SelectDay&&this.IsSame(new Date(this.Year,this.Month-1,g),this.SelectDay)){this.onSelectDay(a)}}}h.appendChild(a)}j.appendChild(h)}while(this.Container.hasChildNodes()){this.Container.removeChild(this.Container.firstChild)}this.Container.appendChild(j);this.onFinish()},IsSame:function(b,a){return(b.getFullYear()==a.getFullYear()&&b.getMonth()==a.getMonth()&&b.getDate()==a.getDate())}};