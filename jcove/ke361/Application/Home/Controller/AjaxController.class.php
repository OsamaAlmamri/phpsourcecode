<?phpnamespace Home\Controller;use Home\Model\GoodsModel;class AjaxController extends HomeController {    public function ajGetGoods(){                   $page = I('get.p','','intval');            $where['status'] = 1;            $cateId = I('get.id','','intval');            if($cateId){                $where['cate_id'] = $cateId;            }            $GoodsModel = new GoodsModel();                    $goods = $this->lists($GoodsModel,$where);            if($goods){                $this->assign('goods',$goods);                $this->assign('page',$page+1);            }            $this->display();            }                public function favor(){        if(empty($this->my)){            $this->error('请先登录');        }        if(IS_AJAX){            $where['goods_id'] = I('get.id','','intval');            $where['uid'] = UID;                       if(M('favor')->where($where)->find()){                $json['state'] = 1;                $json['info'] = "已经收藏过了";                $this->ajaxReturn($json);            }            if(M('favor')->add($where)){                $json['state'] = 1;                $json['info'] = "收藏成功";                D('Goods')->where('id='.$where['goods_id'])->setInc('favor');            }else{                $json['state'] = 0;                $json['info'] = "收藏失败";            }            $this->ajaxReturn($json);        }    }    public function unFavor(){        $this->isLogin();        if(IS_AJAX){            $where['goods_id'] = I('get.id','','intval');            $where['uid'] = UID;                         if(M('favor')->where($where)->delete()){                $json['state'] = 1;                $json['info'] = "删除收藏成功";                $this->ajaxReturn($json);            }else{                $json['state'] = 0;                $json['info'] = "删除收藏失败";            }            $this->ajaxReturn($json);        }    }}