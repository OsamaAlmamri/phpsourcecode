/** 
 * Index/TeCenter 模块公共前端库
 * 2016年9月24日 星期六-与jQuery独立
 */
/******************************************************JavaScript 原型扩展 Begin */
// Array 获取最后一个元素
Array.prototype.last=function(){var g=this.length;return 0==g?"":this[g-1]};Array.prototype.unset=function(g){for(var c=[],a=0;a<this.length;a++)this[a]!=g&&c.push(this[a]);return c};Date.prototype.sysdate=function(g){g=g?g:"y-m-d h:i:s";var c=this.getFullYear(),a=this.getMonth()+1,b=this.getDate(),d=this.getHours(),f=this.getMinutes(),h=this.getSeconds(),c={y:c,Y:parseInt(c.toString().slice(2)),m:10>a?"0"+a:a,M:a,d:10>b?"0"+b:b,D:b,h:10>d?"0"+d:d,H:d,i:10>f?"0"+f:f,I:f,s:10>h?"0"+h:h,S:h,w:this.getDay(),ms:this.getMilliseconds()};-1<g.indexOf("ms")&&(g=g.replace(RegExp("ms","g"),c.ms));for(var e in c)-1!=g.indexOf(e)&&"ms"!=e&&-1<g.indexOf(e)&&(g=g.replace(new RegExp(e,"g"),c[e]));return g};function Conero(){var g=console;this.navAbjust=function(){var a=location.pathname,a=a.replace("/TeCenter/",""),a=a.split("/");a[1]?(a=a[1],a=a.replace(".html","")):a="index";$("#navbar .navbar-nav").find("li."+a).addClass(a+" active")};this.dataid=function(a){return this.empty(a)?"":this.is_object(a)?a.attr("dataid"):$(a).attr("daraid")};this.storage=function(a){return new jutilStorage(a)};this.createHash=function(a,b){if(a){var d=location.href,d=d.split("#")[0]+"#"+a;if(b)return d;location.href=d}return""};this.getQuery=function(a){if("#"==a)return a=location.href,-1<a.indexOf("#")?a.split("#")[1]:"";var b=location.search;return b?(b=b.replace("?",""),b=b.replace(RegExp("\x3d","g"),'":"'),b=b.replace(RegExp("\x26","g"),'","'),b=JSON.parse('{"'+b+'"}'),a?b[a]?b[a]:"":b):""};this.selectBindEl=function(a,b){var d=this.is_object(a)?a:$(a);if(d.is("select")){var f=d.find("option:selected").text(),d=d.find("option:selected").val();this.empty(f)||(this.is_function(b)?b(d,f):$(b).val(f))}};this.strLastValue=function(a,b){var d=a.split(b?b:"/");return d[d.length-1]};this.render4Tpl=function(a,b){if(a&&b){var d=b.match(/\{\{([a-z\d])+\}\}/gi);this.log(d);for(var f=/(\{\{)|(\}\})/g,c=d.length,e,g,m=0;m<c;m++)e=d[m].replace(f,""),this.log(e),g=a&&a[e]?a[e]:"",this.log(new RegExp("{{"+e+"}}","g")),b=b.replace(new RegExp("{{"+e+"}}","g"),g);return b}return""};this.form=function(a,b,d){if(this.empty(a)||this.empty(b))return!1;if(this.is_string(b))try{b=JSON.parse(b)}catch(c){return c}d&&(d=d.toLowerCase());(d=this.empty(d)?"post":d)&&"post"!=d&&"get"!=d&&(d="post");var f=document.createElement("form");f.action=a;f.method=d;f.style="display:none;";if($.isArray(b))for(var h=0;h<b.length;h++)a=document.createElement("textarea"),a.name=h,a.value=b[h],f.appendChild(a);else for(h in b)a=document.createElement("textarea"),a.name=h,a.value=b[h],f.appendChild(a);document.body.appendChild(f);f.submit();return f};this.post=function(a,b){return this.form(a,b,"post")};this.get=function(a,b){return this.form(a,b,"get")};this.formJson=function(a){var b=this.is_object(a)?a:$(a);if(0<b.length){a={};for(var d=b.find("input"),f,c,e=0,e=0;e<d.length;e++)f=$(d[e]),f.attr("disabled")||"checkbox"==f.attr("type")&&!f.is(":checked")||"radio"==f.attr("type")&&!f.is(":checked")||(c=f.attr("name"),this.empty(c)||(a[c]=f.val()));d=b.find("textarea");for(e=0;e<d.length;e++)f=$(d[e]),c=f.attr("name"),this.empty(c)||(a[c]=f.val());b=b.find("select");for(e=0;e<b.length;e++)f=$(b[e]),c=f.attr("name"),this.empty(c)||(a[c]=f.find("option:selected").val());return a}return null};this.formRequired=function(a,b){b=this.empty(b)?!0:!1;var d=this.is_object(a)?a:$(a);if(0<d.length){for(var f=d.find("[required]"),c,e=0;e<f.length;e++)if(d=$(f[e]),!d.attr("disabled")&&(d.is("input")?(c=d.attr("type"),c.toLowerCase(),c="checkbox"==d.attr("type")||"radio"==d.attr("type")?d.find(":checked").val():d.val()):d.is("select")?c=d.find("option:selected").val():d.is("textarea")&&(c=d.val()),c=$.trim(c),this.empty(c)))return f=d.attr("name"),f=this.empty(f)?!0:f,d.focus(),f;if(b)return this.formJson(a)}return!1};var c;this.getJsVar=function(a){if("undefined"==typeof coneroJsVar||this.empty(coneroJsVar))return"";this.is_string(coneroJsVar)&&!this.is_object(c)&&(c=JSON.parse(Base64.decode(coneroJsVar)));return this.is_object(c)?this.undefind(a)?c:this.empty(c[a])?"":c[a]:""};this.uWin=function(a){var b=this;return new function(a){var c;c="string"==typeof a?document.getElementById(a):!1;this.post=function(a,b){b=b?b:location.href;c&&c.contentWindow.postMessage(a,b)};this.setElement=function(a){"string"==typeof a?c=document.querySelector(a):"object"==typeof a&&(c=a);return this};this.response=function(a){window.addEventListener("message",a)};var h=null;this.pWin=function(a){h=window.parent;return b.is_function(a)?a(h,this):h};this.cWin=function(c,f){c=c?b.is_string(c)?$(c):c:null;a=b.is_object(c)?c:a;var g=b.is_object(a)?a.get(0):null;b.empty(g)&&(g=document.getElementById(a));h=g.window||g.contentWindow;return b.is_function(f)?f(h):h}}(a)};this["extends"]=function(a){if(this.is_function(a))return new a(this)};this._extends=function(){this["extends"]=this.prototype};this.log=g.log;this.error=function(a){throw Error("Syntax error, unrecognized expression(Conero): "+a);};this.alertTest=function(a){a||alert(Math.random()*Math.pow(10,Math.ceil(10*Math.random())))};this.is_string=function(a){return"string"==typeof a?!0:!1};this.is_object=function(a){return"object"==typeof a?!0:!1};this.is_array=Array.isArray;this.objectLength=function(a){var b=0;if(this.is_object(a)){if(this.is_array(a))return a.length;for(var d in a)b+=1}else if(a&&a.length)return a.length;return b};this.is_function=function(a){return"function"==typeof a?!0:!1};this.is_number=function(a){var b=/^[0-9]+$/;return a?(a=a.replace(/\s/g,""),b.test(a)):!1};this.undefind=function(a){return"undefined"==typeof a?!0:!1};this.empty=function(a){return this.undefind(a)||""==a||0==a||null==a?!0:!1};(function(a){a.dataInDb=function(a,d,c){a&&this.is_object(d)&&this.is_function(c)&&(d=Base64.encode(JSON.stringify(d)),$.post("/conero/index/common/dataInDb.html",{table:a,where:d},c))};a._project=function(){return location.pathname.split("/")[1]};a._baseurl="/"+a._project()+"/";a.cache=function(b,d){var c=$("#cache_helper");0==$("#cache_helper").length&&($("body").append('\x3cdiv class\x3d"hidden" id\x3d"cache_helper"\x3e\x3c/div\x3e'),c=$("#cache_helper"));if(a.empty(b))return"";var h=c.find('span[dataid\x3d"'+b+'"]'),e=0==h.length?!1:!0;if(a.undefind(d)){if(!e)return"";d=h.text();return a.empty(d)?"":Base64.decode(d)}if(a.is_function(d))return d(h);if(e)return h.text(Base64.encode(d));c.append('\x3cspan dataid\x3d"'+b+'"\x3e'+Base64.encode(d)+"\x3c/span\x3e")};a.cacheAttr=function(b,d,c){var h=$("#cache_helper");return this.cache(b,function(e){var g=0==e.length?!1:!0;if(a.empty(d))return"";if(a.undefind(c)){if(!g)return"";c=e.attr(d);return a.empty(c)?"":Base64.decode(c)}return g?(c=a.empty(c)?"":Base64.encode(c),e.attr(d,c)):h.append('\x3cspan dataid\x3d"'+b+'" '+d+'\x3d"'+Base64.encode(c)+'"\x3e\x3c/span\x3e')})}})(this);(function(a){a.modal=function(b,d,c){if(a.is_string(b)){var g=0<$(b).length?!0:!1;1==g&&$(b).modal(d);return g}b="undefined"==typeof b?{}:b;var g=a.empty(b.title)?"\u6a21\u5f0f\u7a97\u53e3":b.title,e=a.empty(b.id)?"page_modal":b.id,k=a.empty(b.content)?"\u6a21\u5f0f\u5185\u5bb9":b.content,m=a.empty(b.header)?"":b.header,t=a.empty(b.footer)?"":b.footer,l=a.empty(b.large)?"":" modal-lg",u=!a.empty(b.save)&&a.is_function(b.save)?!0:!1,r='\x3cdiv class\x3d"modal fade" id\x3d"'+e+'" tabindex\x3d"-1" role\x3d"dialog" aria-labelledby\x3d"myModalLabel" aria-hidden\x3d"true"\x3e',k='\x3cdiv class\x3d"modal-dialog'+l+'"\x3e\x3cdiv class\x3d"modal-content"\x3e\x3cdiv class\x3d"modal-header"\x3e\x3cbutton type\x3d"button" class\x3d"close" data-dismiss\x3d"modal"\x3e\x3cspan aria-hidden\x3d"true"\x3e\x26times;\x3c/span\x3e\x3cspan class\x3d"sr-only"\x3eClose\x3c/span\x3e\x3c/button\x3e'+m+'\x3ch4 class\x3d"modal-title"\x3e'+g+'\x3c/h4\x3e\x3c/div\x3e\x3cdiv class\x3d"modal-body"\x3e'+k+'\x3c/div\x3e\x3cdiv class\x3d"modal-footer"\x3e\x3cbutton type\x3d"button" class\x3d"btn btn-default" data-dismiss\x3d"modal"\x3eClose\x3c/button\x3e'+(u?'\x3cbutton type\x3d"button" class\x3d"btn btn-default" dataid\x3d"default_save"\x3e\u786e\u5b9a\x3c/button\x3e':"")+t+"\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e",e="#"+e;(g=0==$(e).length?!1:!0)?($(e).html(k),$(e).attr("class","modal fade")):(k=r+k+"\x3c/div\x3e",$("body").append(k));d?$(e).modal(d):$(e).modal();u&&($(e+' [dataid\x3d"default_save"]').off("click"),$(e+' [dataid\x3d"default_save"]').on("click",b.save));if(a.is_object(c))if(a.is_object(c.bindEvent))for(b=c.bindEvent,d=0;d<b.length;d++)$(e+' [dataid\x3d"'+b[d]+'"]').off("click"),$(e+' [dataid\x3d"'+b[d]+'"]').on("click",c[b[d]]);else a.is_string(c.bindEvent)&&(b=c.bindEvent,$(e+' [dataid\x3d"'+b+'"]').off("click"),$(e+' [dataid\x3d"'+b+'"]').on("click",c[b]));return $(e)};a.alert=function(b,c,f){f=a.empty(f)?"\u8b66\u544a":f;c=a.empty(c)?" \u8fd9\u662f\u4e00\u4e2a\u8b66\u544a\u63d0\u793a\u6846\u793a\u4f8b\uff01":c;c='\x3cdiv class\x3d"alert alert-warning alert-dismissible fade in" role\x3d"alert"\x3e\x3cbutton type\x3d"button" class\x3d"close" data-dismiss\x3d"alert"\x3e\x3cspan aria-hidden\x3d"true"\x3e\x26times;\x3c/span\x3e\x3cspan class\x3d"sr-only"\x3eClose\x3c/span\x3e\x3c/button\x3e\x3cstrong\x3e'+f+"\x3c/strong\x3e"+c+"\x3c/div\x3e";if(a.is_function(b))b(c);else{if(a.is_string(b)&&"feek"==b.toLowerCase())return c;a.empty(b)?$("body").append(c):(b=a.is_string(b)?$(b):b,b.html(c))}};a.modal_alert=function(a,c){this.empty(a)||(c=this.empty(c)?"\u8b66\u544a":c,this.modal({id:"btsp_modal_alter",title:"Error-CONERO@...",content:'\x3cdiv class\x3d"alert alert-info" role\x3d"alert"\x3e\x3cspan class\x3d"glyphicon glyphicon-info-sign"\x3e\x3c/span\x3e \x3cstrong\x3e'+c+"!\x3c/strong\x3e "+a+"\x3c/div\x3e"}))};a.confirm=function(a,c,f){this.modal({id:"btsp_modal_confirm",title:f?f:"Confirm-CONERO@...",content:'\x3cdiv class\x3d"alert alert-danger" role\x3d"alert"\x3e\x3cstrong\x3e(^_^)\x3c/strong\x3e '+(a?a:"\u6570\u636e\u786e\u8ba4\u6846")+"\x3c/div\x3e",save:c})};a.pupop=function(b,c){b=a.is_object(b)?b:{};var f=b.post,g=b.field,e=[],k="",m="",t=a.empty(b.single)?!0:!1,l;for(l in g)e.push(l),m=g[l],k+="\x3cth"+("hidden"==m?' class\x3d"hidden"':"")+"\x3e"+m+"\x3c/th\x3e";k='\x3ctable class\x3d"table"\x3e\x3ctr\x3e\x3cth\x3e#\x3c/th\x3e'+k+"\x3cth\x3e\u9009\u62e9\x3c/th\x3e\x3c/tr\x3e";f.field=e.join(",");$.post("/conero/index/common/popup.html",f,function(e){var r=function(b,c){var d=b;if(!a.empty(d)){var f=JSON.parse(d),d=f.data,e="",q=1,r="",v;c&&(q=$("#"+n).find("tr").length);for(var l in d)if(!a.is_function(d[l])){r='\x3ctr class\x3d"datarow"\x3e\x3ctd\x3e'+q+"\x3c/td\x3e";v=!1;for(var u in g){if(a.empty(d[l])){v=!0;break}m=g[u];r+='\x3ctd class\x3d"'+("hidden"==m?"hidden":u)+'"\x3e'+d[l][u]+"\x3c/td\x3e"}if(v)break;e+=r+"\x3ctd\x3e"+(1==t?'\x3cinput type\x3d"checkbox" name\x3d"popupchecked"\x3e':'\x3ca href\x3d"javascript:void(0);" dataid\x3d"selected"\x3e\u9009\u62e9\x3c/a\x3e')+"\x3c/td\x3e\x3c/tr\x3e";q++}return c?(d=$("#"+n).find("div.alert"),d.find('[dataname\x3d"no"]').text(f.no),d.find('[dataname\x3d"pages"]').text(f.pages),$("#"+n).find("table").append(e),e):k+e+'\x3c/table\x3e\x3cdiv class\x3d"alert alert-success" role\x3d"alert"\x3e\x3ca href\x3d"javascript:void(0);"\x3e\x3cbutton type\x3d"button" class\x3d"btn btn-primary" dataid\x3d"nextpage"\x3e+\x3c/button\x3e\x3c/a\x3e '+(' \u6570\u636e\u6761\u6570\x3cspan dataname\x3d"count"\x3e'+f.count+'\x3c/span\x3e,\u5f53\u524d\u5206\u9875\uff1a\x3cspan dataname\x3d"no"\x3e'+f.no+'\x3c/span\x3e/\x3cspan dataname\x3d"pages"\x3e'+f.pages+"\x3c/span\x3e")+"\x3c/div\x3e"}},q="",v;for(v in g)"hidden"!=g[v]&&(q+='\x3coption value\x3d"'+v+'"\x3e'+g[v]+"\x3c/option\x3e");e='\x3cdiv class\x3d"form-inline"\x3e\x3cselect class\x3d"form-control" name\x3d"skey"\x3e'+q+'\x3c/select\x3e\x3cinput type\x3d"text" class\x3d"form-control" name\x3d"svalue"\x3e\x3cbutton type\x3d"button" class\x3d"btn btn-primary" dataid\x3d"search"\x3e\u67e5\u627e\x3c/button\x3e\x3c/div\x3e'+r(e);var n=f.table;e={content:e,footer:'\x3cbutton type\x3d"button" class\x3d"btn btn-default" dataid\x3d"save"\x3e\u786e\u8ba4\x3c/button\x3e',id:n};a.empty(b.title)||(e.title=b.title);a.modal(e);q=e=!0;a.is_object(c)&&(a.is_function(c.search)&&(e=!1,$("#"+n+' [dataid\x3d"search"]').unbind("click"),$("#"+n+' [dataid\x3d"search"]').on("click",c.search)),a.is_function(c.selected)&&($("#"+n+' dataid\x3d"selected"').unbind("click"),$("#"+n+' dataid\x3d"selected"').on("click",c.selected)),a.is_function(c.save)&&($("#"+n+' [dataid\x3d"save"]').unbind("click"),$("#"+n+' [dataid\x3d"save"]').on("click",c.save)),a.is_function(c.next)&&(q=!1,$("#"+n+' [dataid\x3d"nextpage"]').unbind("click"),$("#"+n+' [dataid\x3d"nextpage"]').on("click",c.next)));1==e&&($("#"+n+' [dataid\x3d"search"]').unbind("click"),$("#"+n+' [dataid\x3d"search"]').on("click",function(){var b=$(this).parents("div.form-inline"),c=b.find("select option:selected").val(),d=b.find('input[name\x3d"svalue"]'),b=d.val();if(a.empty(b))d.focus();else{var d=f.map,e;a.is_object(d)?d[c]=["like","%"+b+"%"]:a.is_string(d)&&d&&(e=" and "+c+" like '%"+b+"%'");f.map=d+e;d="";$.post("/conero/index/common/popup.html",f,function(a){a=r(a);var b=$("#"+n).find("div.modal-body");b.find("table").remove();b.find("div.alert").remove();b.append(a)})}}));1==q&&($("#"+n+' [dataid\x3d"nextpage"]').unbind("click"),$("#"+n+' [dataid\x3d"nextpage"]').on("click",function(){var b=$("#"+n).find("div.alert"),c=parseInt(b.find('[dataname\x3d"no"]').text()),b=parseInt(b.find('[dataname\x3d"pages"]').text()),d=1,e=$("#"+n).find("div.form-inline"),g=e.find("select option:selected").val(),e=e.find('input[name\x3d"svalue"]').val(),h=f.map,q="";a.is_object(h)?h[g]=["like","%"+e+"%"]:a.is_string(h)&&h&&(q=" and "+g+" like '%"+e+"%'");f.map=h+q;h="";c<b&&(d=c+1);f.page=d;$.post("/conero/index/common/popup.html",f,function(a){r(a,!0)})}))})};a.formListEvent=function(b,c){c=a.is_object(c)?c:{};if(!a.empty(b)){var f=$(b.table),g=a.empty(b.addBtn)?"#row_add_btn":b.addBtn,e=a.empty(b.delBtn)?"#row_del_btn":b.delBtn,k=a.empty(b.saveBtn)?"#row_save_btn":b.saveBtn,m=a.empty(b.least1)?!0:!1,t=a.empty(b.form)?b.table:b.form,l=a.empty(b.url)?null:b.url,u=a.empty(b.pk)?null:b.pk;a.empty(l)&&$(t).is("form")&&(l=$(t).attr("action"));$(g).click(function(){var b=f.find("tr").length,e=f.find('tr[dataid\x3d"'+(b-1)+'"]');a.formRequired(e,!0)||a.is_function(c.AddCheck)&&c.AddCheck(f.find(e))||(e='\x3ctr dataid\x3d"'+b+'"\x3e'+e.html()+"\x3c/tr\x3e",f.append(e),e=f.find('tr[dataid\x3d"'+b+'"]'),e.find('td[class\x3d"rowno"]').text(b),a.is_function(c.afterAddRow)&&c.afterAddRow(e))});$(e).click(function(){var a=f.find("tr").length;m&&2==a||(a=f.find('tr[dataid\x3d"'+(a-1)+'"]'),0<a.length&&a.remove())});$(k).click(function(){for(var b=f.find("tr").length,e,g=[],h=1;h<b;h++){e=f.find('tr[dataid\x3d"'+h+'"]');e=a.formRequired(e);if(!a.is_object(e))return;g.push(JSON.stringify(e))}if(a.is_function(c.beforeSaveData)){b=c.beforeSaveData(g);if(a.is_object(b)&&0<a.objectLength(b))return a.post(l,b),!1;if(b)return!1}a.post(l,g);return!1});return new function(a){this.addRowByRecord=function(b,c,d,e){e=e?e:u;if(a.empty(e))a.modal_alert("\u65e0\u6cd5\u53d1\u73b0\u6570\u636e\u4e3b\u952e\uff0c\u51fd\u6570\u521d\u59cb\u5316\u65f6!");else{b=a.is_string(b)?JSON.parse(b):b;a.is_function(c)&&c(b);var p=f.find("tr").length;if(!b[e]||a.is_object(b[e])||!this.havePkey(b[e])){var p=f.find('tr[dataid\x3d"'+(p-1)+'"]'),k,l;k=p.find('[name\x3d"'+e+'"]');0<k.length&&!a.empty(k.val())&&($(g).click(),p=f.find("tr").length,p=f.find('tr[dataid\x3d"'+(p-1)+'"]'));c=!1;for(var m in b)if(a.is_number(m)&&a.is_object(b[m])){c=!0;k=p.find('[name\x3d"'+e+'"]');0<k.length&&!a.empty(k.val())&&($(g).click(),p=f.find("tr").length,p=f.find('tr[dataid\x3d"'+(p-1)+'"]'));l=b[m];for(var t in l)l[e]&&!a.is_object(l[e])&&this.havePkey(l[e])||(k=p.find('[name\x3d"'+e+'"]'),0==k.length&&p.find("td:first-child").append('\x3cinput type\x3d"hidden" name\x3d"'+e+'" value\x3d"'+b[e]+'"\x3e'),p.find('[name\x3d"'+t+'"]').val(l[t]),a.is_function(d)&&d(p))}else k=p.find('[name\x3d"'+e+'"]'),0==k.length&&p.find("td:first-child").append('\x3cinput type\x3d"hidden" name\x3d"'+e+'" value\x3d"'+b[e]+'"\x3e'),p.find('[name\x3d"'+m+'"]').val(b[m]);a.is_function(d)&&0==c&&d(p)}}};this.havePkey=function(a,b){b=b?b:u;if(a&&b)for(var c=f.find('[value\x3d"'+a+'"]'),d,e=0;e<c.length;e++)if(d=$(c[e]),d=d.attr("name"),b==d)return!0;return!1}}(this)}}})(this)}function jutilStorage(g){this.engine="session"!=g&&"local"!=g?"session":g;this.table=function(c){if(this.undefind(c))return this.undefind(this._table)&&(this._table=""),this._table;this._table=c;return this};this.add=function(c,a){this.empty(a)&&(a=this.table());if(this.empty(a))return this.error("add## \u65e0\u6cd5\u83b7\u53d6\u5230table\u7684\u503c\uff01"),"";if(!this.object(c))return this.error("add## \u5b58\u50a8\u6570\u636e\u5fc5\u987b\u4e3aJSON\u683c\u5f0f\u6570\u636e\uff01"),"";var b=JSON.stringify(c);"session"==this.engine?this.session(a,b):this.local(a,b);return!0};this.update=function(c,a){var b=this.table();if(this.empty(b))return this.error("select## \u65e0\u6cd5\u83b7\u53d6\u5230table\u7684\u503c\uff01"),!1;var d=this.select();if(this.empty(c))return this.error("update## \u65e0\u6cd5\u83b7\u53d6\u5230key\u7684\u503c,\u8bf7\u8bbe\u7f6ekey\uff08json/string\uff09\u503c\uff01"),!1;this.object(d)||(d={});if(this.object(c))for(var f in c)d[f]=c[f];this.undefind(a)?delete d[c]:d[c]=a;d=JSON.stringify(d);return"session"==this.engine?this.session(b,d):this.local(b,d)};this.select=function(c,a){var b=this.table();if(this.empty(b))return this.error("select## \u65e0\u6cd5\u83b7\u53d6\u5230table\u7684\u503c\uff01"),"";b="session"==this.engine?this.session(b):this.local(b);try{var d=JSON.parse(b)}catch(f){this.error(f),d={}}if(this.empty(c))return d;if(this.undefind(a))return!this.empty(d)&&d[c]?d[c]:"";d[c]=a};this.array=function(c,a,b){if(!this.empty(c))if(b=b?b:",",this.undefind(a)){var d=this.get(c);if(d)return d.split(b)}else this.empty(a)||(d=this.get(c),-1==d.indexOf(a)&&(d=d.split(b),d.push(a),this.update(c,d.join(b))))};this.removeArray=function(c,a,b){for(var d=this.array(c),f=[],g=0;g<d.length;g++)d[g]!=a&&f.push(d[g]);return this.update(c,f.join(b?b:","))};this.get=function(c){return this.select(c)};this.undefind=function(c){return"undefind"==typeof c||null==c?!0:!1};this.object=function(c){return null==c?!1:"object"==typeof c?!0:!1};this.empty=function(c){return this.undefind(c)||""==c||0==c?!0:!1};this.session=function(c,a){this.undefind(window.sessionStorage)&&this.error("\u6d4f\u89c8\u5668\u4e0d\u652f\u6301 sessionStorage");if(this.empty(c))return null;if(this.empty(a))return sessionStorage.getItem(c);sessionStorage.setItem(c,a);return!0};this.local=function(c,a){this.undefind(window.localStorage)&&this.error("\u6d4f\u89c8\u5668\u4e0d\u652f\u6301 localStorage");if(this.empty(c))return!1;if(this.empty(a))return localStorage.getItem(c);localStorage.setItem(c,a);return!0};this.error=function(c){if(this.undefind(c)){this.undefind(this._error)&&(this._error="0");try{console.log(this._error)}catch(a){}return this._error}this._error=c};this.is_string=function(c){return"string"==typeof c?!0:flase};this.is_object=function(c){return"object"==typeof c?!0:flase}}var Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\x3d",encode:function(g){var c="",a,b,d,f,h,e,k=0;for(g=this._utf8_encode(g);k<g.length;)a=g.charCodeAt(k++),b=g.charCodeAt(k++),d=g.charCodeAt(k++),f=a>>2,a=(a&3)<<4|b>>4,h=(b&15)<<2|d>>6,e=d&63,isNaN(b)?h=e=64:isNaN(d)&&(e=64),c=c+this._keyStr.charAt(f)+this._keyStr.charAt(a)+this._keyStr.charAt(h)+this._keyStr.charAt(e);return c},decode:function(g){var c="",a,b,d,f,h,e=0;for(g=g.replace(/[^A-Za-z0-9\+\/\=]/g,"");e<g.length;)a=this._keyStr.indexOf(g.charAt(e++)),b=this._keyStr.indexOf(g.charAt(e++)),f=this._keyStr.indexOf(g.charAt(e++)),h=this._keyStr.indexOf(g.charAt(e++)),a=a<<2|b>>4,b=(b&15)<<4|f>>2,d=(f&3)<<6|h,c+=String.fromCharCode(a),64!=f&&(c+=String.fromCharCode(b)),64!=h&&(c+=String.fromCharCode(d));return c=this._utf8_decode(c)},_utf8_encode:function(g){g=g.replace(/\r\n/g,"\n");for(var c="",a=0;a<g.length;a++){var b=g.charCodeAt(a);128>b?c+=String.fromCharCode(b):(127<b&&2048>b?c+=String.fromCharCode(b>>6|192):(c+=String.fromCharCode(b>>12|224),c+=String.fromCharCode(b>>6&63|128)),c+=String.fromCharCode(b&63|128))}return c},_utf8_decode:function(g){for(var c="",a=0,b=c1=c2=0;a<g.length;)b=g.charCodeAt(a),128>b?(c+=String.fromCharCode(b),a++):191<b&&224>b?(c2=g.charCodeAt(a+1),c+=String.fromCharCode((b&31)<<6|c2&63),a+=2):(c2=g.charCodeAt(a+1),c3=g.charCodeAt(a+2),c+=String.fromCharCode((b&15)<<12|(c2&63)<<6|c3&63),a+=3);return c}};