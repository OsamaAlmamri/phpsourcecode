"use strict";$(function(){var a=new Swiper(".view .swiper-container",{prevButton:".swiper-button-prev",nextButton:".swiper-button-next",onInit:function(t){$(".preview .swiper-slide:first").addClass("active-nav")},onSlideChangeStart:function(t){$(".preview .swiper-slide").removeClass("active-nav"),$(".preview .swiper-slide").each(function(){$(this).removeClass("active-nav"),$(this).data("id")==a.activeIndex+1&&$(this).addClass("active-nav")})}}),t=new Swiper(".preview .swiper-container",{visibilityFullFit:!0,slidesPerView:"auto",allowTouchMove:!1,onTap:function(){a.slideTo(t.clickedIndex)}})}),$(function(){var t=$('input[data-toggle="product_sku"]').val();t=$.parseJSON(t),$(".sku-content").Muusku({sku_data:t})}),$(function(){var e=$('input[data-toggle="product_sku"]').val();e=$.parseJSON(e),$('[data-role="now-buy"]').click(function(){var t=$('[data-type="title"]').data("id"),a=$(".count-input").val();a=isNaN(a)?1:a;var n=$('[data-role="now-buy"]').data("url");if(e){var i=$('[data-role="sku-data"]').find("input").val();i?window.location.href=n+"?id="+t+"&quantity="+a+"&sku="+i:alert("请选择商品规格")}else window.location.href=n+"?id="+t+"&quantity="+a})}),$(function(){var o=$('input[data-toggle="product_sku"]').val();o=$.parseJSON(o),$('[data-role="buy-now"]').click(function(){var t=$(".count-input").val();t=isNaN(t)?1:t;var a=$('[data-type="title"]').data("id");if(o){var n=$(".sku-content").find("input").val();if(!n)return void alert("请选择商品规格");a+=";"+n}var i={sku_id:a,quantity:t},e=$(this).data("url");$.post(e,i,function(t){1==t.code?($.muushop.get_cart_count(),window.location.href="/muushop/order/makeorder.html?cart_id="+t.data):toast.error(t.msg,"温馨提示")})})}),$(function(){var o=$('input[data-toggle="product_sku"]').val();o=$.parseJSON(o),$('[data-role="add-cart"]').click(function(){var t=$(".count-input").val();t=isNaN(t)?1:t;var a=$('[data-type="title"]').data("id");if(o){var n=$(".sku-content").find("input").val();if(!n)return void alert("请选择商品规格");a+=";"+n}var i={sku_id:a,quantity:t},e=$('[data-role="add-cart"]').data("url");$.post(e,i,function(t){t.code?($.muushop.get_cart_count(),toast.success(t.msg,"温馨提示")):toast.error(t.msg,"温馨提示")})})}),$(function(){var t=$(".count-content .cut-btn"),a=$(".count-content .add-btn"),n=$(".count-content .count-input");t.click(function(){n.val()<=1||n.val(parseInt(n.val())-1)}),a.click(function(){var t=parseInt($(".quantity span").text());n.val()>=t||n.val(parseInt(n.val())+1)})});