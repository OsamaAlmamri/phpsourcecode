"use strict";$(function(){var a=new Swiper(".view .swiper-container",{prevButton:".swiper-button-prev",nextButton:".swiper-button-next",onInit:function(a){$(".preview .swiper-slide:first").addClass("active-nav")},onSlideChangeStart:function(t){$(".preview .swiper-slide").removeClass("active-nav"),$(".preview .swiper-slide").each(function(){$(this).removeClass("active-nav"),$(this).data("id")==a.activeIndex+1&&$(this).addClass("active-nav")})}}),t=new Swiper(".preview .swiper-container",{visibilityFullFit:!0,slidesPerView:"auto",allowTouchMove:!1,onTap:function(){a.slideTo(t.clickedIndex)}})}),$(function(){var a=$('input[data-toggle="product_sku"]').val();a=$.parseJSON(a),$(".sku-content").Muusku({sku_data:a})}),$(function(){var a=$('input[data-toggle="product_sku"]').val();a=$.parseJSON(a),$(".buyImmediately").click(function(){var t=$('[data-type="title"]').data("id"),e=$(".count-input").val();if(e=isNaN(e)?1:e,a){var i=$(".sku-content").find("input").val();i?window.location.href="index.php?s=/muushop/order/makeorder&id="+t+"&quantity="+e+"&sku="+i:alert("请选择商品规格")}else window.location.href="index.php?s=/muushop/order/makeorder&id="+t+"&quantity="+e})}),$(function(){var a=$('input[data-toggle="product_sku"]').val();a=$.parseJSON(a),$(".addCartNow").click(function(){var t=$(".count-input").val();t=isNaN(t)?1:t;var e=$('[data-type="title"]').data("id");if(a){var i=$(".sku-content").find("input").val();if(!i)return void alert("请选择商品规格");e+=";"+i}var n={sku_id:e,quantity:t},s=$('input[data-toggle="add_cart_url"]').val();$.post(s,n,function(a){1==a.status?($.get_cart_count(),toast.success(a.info,"温馨提示")):toast.error(a.info,"温馨提示")})})}),$(function(){var a=$(".count-content .cut-btn"),t=$(".count-content .add-btn"),e=$(".count-content .count-input");a.click(function(){e.val()<=1||e.val(parseInt(e.val())-1)}),t.click(function(){var a=parseInt($(".quantity span").text());e.val()>=a||e.val(parseInt(e.val())+1)})}),$(function(){function a(a,t){a=a||1,t=t||10;var e=$('[data-toggle="product_id"]').val(),i="/muushop/api/comment/page/"+a+"/r/"+t+"/product_id/"+e;$.get(i,function(e){if(1==e.status){var i=e.data.list;null==i&&(i=""),$("#comment .list-box").html("");for(var n=0;n<i.length;n++){for(var s="",r=0;r<i[n].sku.length;r++)s+='<span class="sku_item">'+i[n].sku[r]+"</span>";var c;c='<div class="comment-item clearfix"><div class="col-xs-2"><div class="user-item"><div class="avatar"><img src="'+i[n].user.avatar32+'" class="img-circle" /></div><div class="nickname">'+i[n].user.nickname+'</div></div></div><div class="col-xs-10"><div class="score clearfix"><div class="atar_Show"><p tip="'+i[n].score+'"></p></div><span></span></div><div class="brief">'+i[n].brief+'</div><div class="sku">'+s+' <span class="create_time">'+i[n].create_time+"</span></div></div></div>",$("#comment .list-box").append(c)}$("#comment .list-box .score p").each(function(a,t){var e=$(this).attr("tip"),i=2*e*16;$(this).css("width",i),$(this).parent(".atar_Show").siblings("span").text(e+"分")});var o=e.data.totalCount,p=Math.ceil(o/t);if($("#comment .page-box .now_page").text(a),$("#comment .page-box .pager").html(""),p>1){if(a>1){var l='<li class="previous"><a href="javascript:;">« 上一页</a></li>';$("#comment .page-box .pager").append(l)}if(a>3){var u='<li class="page_num"><a href="javascript:;">1</a></li>';u+="<li><a>...</a></li>",$("#comment .page-box .pager").append(u)}for(n=1;n<=p;n++){var v="";a+3>n&&a-3<n&&(v='<li class="page_num"><a href="javascript:;">'+n+"</a></li>"),a<3&&n<6&&(v='<li class="page_num"><a href="javascript:;">'+n+"</a></li>"),n+1>p&&(v="<li><a>...</a></li>",v+='<li class="page_num"><a href="javascript:;">'+n+"</a></li>"),a==n&&(v='<li class="page_num active"><a href="javascript:;">'+n+"</a></li>"),$("#comment .page-box .pager").append(v)}if(p>a){l='<li class="next"><a href="javascript:;">下一页 »</a></li>';$("#comment .page-box .pager").append(l)}}}})}a(1,10),$(document).on("click",".page-box .pager li.page_num a",function(){return a(parseInt($(this).text())),!1}),$(document).on("click",".page-box .pager li.next a",function(){return a(parseInt($("#comment .page-box .now_page").text())+1),!1}),$(document).on("click",".page-box .pager li.previous a",function(){return a(parseInt($("#comment .page-box .now_page").text())-1),!1})});