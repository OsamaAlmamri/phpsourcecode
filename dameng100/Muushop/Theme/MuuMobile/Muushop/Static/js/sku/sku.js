"use strict";!function(t,a,e,s){var n=function(a,e){this.element=a,this.options=e,this.opts=t.extend({},this.DEFAULTS,e),this.init("muusku",a,e)};n.DEFAULTS={sku_data:""},n.prototype.init=function(a,e,s){var n=this;if(this.type=a,!this.opts.sku_data)return this.orderSku;this.quantity();var i={},u=e.find("li");u.click(function(){var a=[];t.each(n.opts.sku_data.table,function(t,e){a.push(t)});var s=t(this);s.parent().attr("data-sku");if(s.hasClass("no_sku"))delete i[s.attr("data-table")];else{u.hasClass("no_sku")&&delete i[s.attr("data-table")],i[s.attr("data-table")]=s.attr("data-value"),s.siblings().removeClass("selected"),s.addClass("selected"),u.removeClass("no_sku");var r={};a.forEach(function(t){r[t]=i[t]}),i=r;var o="";t.each(r,function(t,a){a?o+=";"+t+":"+a:a="",";"==o.substr(0,1)&&(o=o.substr(1))}),t.each(n.opts.sku_data.info,function(a,e){if((a=a.split(";")).indexOf(s.attr("data-table")+":"+s.attr("data-value"))>=0)for(var n=0;n<u.length;n++){var i=t(u[n]).attr("data-table")+":"+t(u[n]).attr("data-value");a.indexOf(i)>=0&&s.attr("data-table")!=t(u[n]).attr("data-table")&&(""!=e.quantity&&0!=e.quantity||(t(u[n]).removeClass("selected"),t(u[n]).addClass("no_sku")))}});for(var d=e.find("li.selected"),l="",c=0;c<d.length;c++)l+=";"+t(d[c]).attr("data-table")+":"+t(d[c]).attr("data-value");";"==l.substr(0,1)&&(l=l.substr(1)),n.skuQuery(l),n.quantity(l),n.price(l)}})},n.prototype.skuQuery=function(a){var e=this;t.each(this.opts.sku_data.info,function(t,s){t==a&&e.element.find("input").val(a)})},n.prototype.quantity=function(a){var e=0;return t.each(this.opts.sku_data.info,function(t,s){a?a.indexOf(";")>=0?t==a&&(e=parseInt(s.quantity)):(t=t.split(";")).indexOf(a)>=0&&(e+=parseInt(s.quantity)):e+=parseInt(s.quantity)}),t(".quantity span").text(e),e},n.prototype.price=function(a){a=t.trim(a);var e=0;t.each(this.opts.sku_data.info,function(s,n){s==a&&(e=n.price,t(".now-price").text(e))})},n.prototype.sku=function(t){return this.orderSku},t.fn.Muusku=function(t){new n(this,t);return this}}(jQuery,window,document);