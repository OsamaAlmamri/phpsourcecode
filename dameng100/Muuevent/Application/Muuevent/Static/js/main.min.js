"use strict";function SelectTag(t){this.child=t.child||".sx_child",this.over=t.over||"on",this.all=t.all||".all",this.init()}jQuery.extend({MuueventTime:{CurTime:function(){return Date.parse(new Date)/1e3},DateToUnix:function(t){var e=t.split(" ",2),n=(e[0]?e[0]:"").split("-",3),i=(e[1]?e[1]:"").split(":",3);return new Date(parseInt(n[0],10)||null,(parseInt(n[1],10)||1)-1,parseInt(n[2],10)||null,parseInt(i[0],10)||null,parseInt(i[1],10)||null,parseInt(i[2],10)||null).getTime()/1e3},UnixToDate:function(t,e,n){"number"==typeof n&&(t=parseInt(t)+60*parseInt(n)*60);var i=new Date(1e3*t),r="";return r+=i.getUTCFullYear()+"-",r+=i.getUTCMonth()+1+"-",r+=i.getUTCDate(),!0===e&&(r+=" "+i.getUTCHours()+":",r+=i.getUTCMinutes()+":",r+=i.getUTCSeconds()),r}}}),$(function(){$(".unSign").click(function(){if(confirm("确定要取消报名么？")){var t=$(this).attr("data-eventID");$.post(U("Event/Index/unSign"),{event_id:t},function(t){t.status?(toast.success(t.info),setTimeout(function(){location.reload()},1500)):toast.error(t.info)},"json")}}),$(".delEvent").click(function(){if(confirm("确定要删除活动么？")){var t=$(this).attr("data-eventID");$.post(U("Event/Index/doDelEvent"),{event_id:t},function(t){t.status?(toast.success(t.info),setTimeout(function(){location.href=t.url},1500)):toast.error(t.info)},"json")}}),$(".endEvent").click(function(){if(confirm("确定要提前结束活动么？")){var t=$(this).attr("data-eventID");$.post(U("Event/Index/doEndEvent"),{event_id:t},function(t){t.status?(toast.success(t.info),setTimeout(function(){location.reload()},1500)):toast.error(t.info)},"json")}})}),$.extend(SelectTag.prototype,{init:function(){this._bindEvent(),this._select()},_bindEvent:function(){var r=this;$(r.child).click(function(t){t.preventDefault();var e=window.location.href,n=$(this).attr("rel"),i=$(this).attr("name");$(this).hasClass(r.over)||(window.location.href=r._changeURLPar(e,i,n))}),$(r.all).click(function(t){t.preventDefault();var e=window.location.href,n=$(this).attr("name");$("[name="+n+"]").removeClass(r.over),$(this).addClass(r.over),window.location.href=r._delUrlPar(e,n)})},_delUrlPar:function(t,e){var n="";if(-1==t.indexOf("?"))return t;var i="",r="";if(-1!=(n=t.substr(t.indexOf("?")+1)).indexOf("&")){for(var a in i=n.split("&"))i[a].split("=")[0]!=e&&(r=r+i[a].split("=")[0]+"="+i[a].split("=")[1]+"&");return t.substr(0,t.indexOf("?"))+"?"+r.substr(0,r.length-1)}return(i=n.split("="))[0]==e?t.substr(0,t.indexOf("?")):t},_changeURLPar:function(t,e,n){var i=e+"=([^&]*)",r=e+"="+n,a=encodeURI(this._getQueryString(e));return t.match(i)?t=t.replace(a,n):t.match("[?]")?t+"&"+r:t+"?"+r},_getQueryString:function(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)","i"),n=window.location.search.substr(1).match(e);return null!=n?decodeURI(n[2]):null},_select:function(){var n=this,i=window.location.href;$(n.child).each(function(){var t=$(this).attr("name")+"="+$(this).attr("rel");if(new RegExp(encodeURI(t),"g").test(i)){$(this).addClass(n.over);var e=$(this).attr("name");$("[name="+e+"]").eq(0).removeClass(n.over)}else $(this).removeClass(n.over)})}});