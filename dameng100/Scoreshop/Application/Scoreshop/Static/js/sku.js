"use strict";!function(c,t,a,e){var s=function(t,a){this.element=t,this.options=a,this.opts=c.extend({},this.DEFAULTS,a),this.init("muusku",t,a)};s.DEFAULTS={sku_data:""},s.prototype.init=function(t,r,a){var o=this;if(this.type=t,!this.opts.sku_data)return this.orderSku;this.quantity();var d={},l=r.find("li");l.click(function(){var e=[];c.each(o.opts.sku_data.table,function(t,a){e.push(t)});var n=c(this);n.parent().attr("data-sku");if(n.hasClass("no_sku"))delete d[n.attr("data-table")];else{l.hasClass("no_sku")&&delete d[n.attr("data-table")],d[n.attr("data-table")]=n.attr("data-value"),n.siblings().removeClass("selected"),n.addClass("selected"),l.removeClass("no_sku");var a={};e.forEach(function(t){a[t]=d[t]}),d=a;var s="";c.each(a,function(t,a){a?s+=";"+t+":"+a:a="",";"==s.substr(0,1)&&(s=s.substr(1))}),c.each(o.opts.sku_data.info,function(t,a){if(0<=(t=t.split(";")).indexOf(n.attr("data-table")+":"+n.attr("data-value")))for(var e=0;e<l.length;e++){var s=c(l[e]).attr("data-table")+":"+c(l[e]).attr("data-value");0<=t.indexOf(s)&&n.attr("data-table")!=c(l[e]).attr("data-table")&&(""!=a.quantity&&0!=a.quantity||(c(l[e]).removeClass("selected"),c(l[e]).addClass("no_sku")))}});for(var t=r.find("li.selected"),i="",u=0;u<t.length;u++)i+=";"+c(t[u]).attr("data-table")+":"+c(t[u]).attr("data-value");";"==i.substr(0,1)&&(i=i.substr(1)),o.skuQuery(i),o.quantity(i),o.price(i)}})},s.prototype.skuQuery=function(e){var s=this;c.each(this.opts.sku_data.info,function(t,a){t==e&&s.element.find("input").val(e)})},s.prototype.quantity=function(e){var s=0;return c.each(this.opts.sku_data.info,function(t,a){e?0<=e.indexOf(";")?t==e&&(s=parseInt(a.quantity)):0<=(t=t.split(";")).indexOf(e)&&(s+=parseInt(a.quantity)):s+=parseInt(a.quantity)}),c(".quantity aq").text(s),s},s.prototype.price=function(e){e=c.trim(e);var s=0;c.each(this.opts.sku_data.info,function(t,a){t==e&&(s=a.price,c(".now-price").text(s))})},s.prototype.sku=function(t){return this.orderSku},c.fn.Muusku=function(t){new s(this,t);return this}}(jQuery,window,document);