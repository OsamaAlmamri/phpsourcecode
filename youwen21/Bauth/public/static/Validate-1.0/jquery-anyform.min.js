/* http://diegolopeslima.github.com/jQuery-AnyForm */
;(function(a,b,c){var d={sendForm:!0,waiAria:!0,onSubmit:!0,onKeyup:!1,onBlur:!1,onChange:!1,nameSpace:"validate",conditional:{},prepare:{},eachField:a.noop,eachInvalidField:a.noop,eachValidField:a.noop,invalid:a.noop,valid:a.noop,filter:"*"},e=['[type="color"],[type="date"],[type="datetime"],[type="datetime-local"],[type="email"],[type="file"],[type="hidden"],[type="month"],[type="number"],[type="password"],[type="range"],[type="search"],[type="tel"],[type="text"],[type="time"],[type="url"],[type="week"],textarea',"select",'[type="checkbox"],[type="radio"]'],f=e.join(","),g=function(b,d){var f={pattern:!0,conditional:!0,required:!0},g=a(this),h=g.val(),i=g.data("prepare"),j=g.data("pattern")||/(?:)/,k=g.data("ignore-case"),l=g.data("mask"),m=g.data("conditional"),n=g.data("required"),o=g.data("trim"),p=/^(true|1|)$/i,q=/^(false|0)$/i;if(p.test(o)&&(h=a.trim(h)),a.isFunction(i)?h=i.call(g,h)+"":a.isFunction(d.prepare[i])&&(h=d.prepare[i].call(g,h)+""),"regexp"!=a.type(j)&&(k=q.test(k)?!1:!0,j=k?RegExp(j,"i"):RegExp(j)),m!=c)if(a.isFunction(m))f.conditional=!!m.call(g,b,d);else for(var r=m.split(/[\s\t]+/),s=0,t=r.length;t>s;s++)r[s]in d.conditional&&!d.conditional[r[s]].call(g,b,d)&&(f.conditional=!1);if(n=p.test(n)?!0:!1,n&&(g.is(e[0]+","+e[1])?!h.length>0&&(f.required=!1):g.is(e[2])&&(g.is("[name]")?0==a('[name="'+g.attr("name")+'"]:checked').length&&(f.required=!1):f.required=g.is(":checked"))),g.is(e[0]))if(j.test(h)){if("keyup"!=b.type&&l!=c){for(var u=h.match(j),v=0,t=u.length;t>v;v++)l=l.replace(RegExp("\\$\\{"+v+"(?:\\:([^\\{\\}\\:]*))?\\}"),u[v]!==c?u[v]:"$1");j.test(l)&&g.val(l.replace(/\$\{[0-9]+(?:\:([^\{\}]*))?\}/g,"$1"))}}else n?f.pattern=!1:h.length>0&&(f.pattern=!1);return d.eachField.call(g,b,f,d),f.required&&f.pattern&&f.conditional?(d.waiAria&&g.attr("aria-invalid",!1),d.eachValidField.call(g,b,f,d)):(d.waiAria&&g.attr("aria-invalid",!0),d.eachInvalidField.call(g,b,f,d)),f};a.extend({validateSetup:function(b){return a.isPlainObject(b)?a.extend(d,b):d},validate:{version:"1.0"}}).fn.extend({validate:function(b){return b=a.isPlainObject(b)?a.extend(d,b):d,a(this).validateDestroy().each(function(){var c=a(this);if(c.is("form")){c.data("validate",{options:b});var d=c.find(f);c.is("[id]")&&(d=d.add('[form="'+c.attr("id")+'"]').filter(f)),d=d.filter(b.filter),b.onKeyup&&d.filter(e[0]).on("keyup."+b.namespace,function(a){g.call(this,a,b)}),b.onBlur&&d.on("blur."+b.namespace,function(a){g.call(this,a,b)}),b.onChange&&d.on("change."+b.namespace,function(a){g.call(this,a,b)}),b.onSubmit&&c.on("submit."+b.namespace,function(e){var f=!0;d.each(function(){var a=g.call(this,e,b);a.pattern&&a.conditional&&a.required||(f=!1)}),f?(b.sendForm||e.preventDefault(),a.isFunction(b.valid)&&b.valid.call(c,e,b)):(e.preventDefault(),a.isFunction(b.invalid)&&b.invalid.call(c,e,b))})}})},validateDestroy:function(){var b=a(this),d=b.data("validate");if(b.is("form")&&a.isPlainObject(d)&&d.options.nameSpace!==c){var e=d.nameSpace,g=b.removeData("validate").find(f).andSelf();b.is("[id]")&&(g=g.add(a('[form="'+b.attr("id")+'"]').filter(f))),g.off("."+e)}return b}})})(jQuery,window);