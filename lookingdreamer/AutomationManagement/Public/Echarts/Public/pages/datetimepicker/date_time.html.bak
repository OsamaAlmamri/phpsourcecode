<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>日期和时间</title>
<link href="../../css/bootstrap.min.css" rel="stylesheet">
<link href="../../css/font-awesome.css" rel="stylesheet"> 
<link href="../../css/koala_datetimepicker.css" rel="stylesheet"> 
<link href="../../css/bootstrap.css" rel="stylesheet" media="screen">
<link href="../../css/koala.css" rel="stylesheet" media="screen">
<script src="../../js/bootstrap.js" type="text/javascript"></script>
<script src="../../js/jquery.js" type="text/javascript"></script>
<script src="../../js/bootstrap.min.js" type="text/javascript" ></script>
<script src="../../js/Koala_DateTimePicker.js" type="text/javascript" ></script>
<script src="../../js/Koala_ToolTip.js">  </script>
<script src="../../js/Koala_Popover.js"></script>
<script src="../../js/Koala_Select.js" type="text/javascript"></script>
<script src="../select/data.js" type="text/javascript"></script>
<script type="text/javascript">
$(function(){
	var datetimepicker = $('#datetimepicker2').datetimepicker({
		 language: 'zh-CN',
		 pickDate: true,
		 pickTime: true
	});
	
    function datetime_to_unix(datetime){
	var tmp_datetime = datetime.replace(/:/g,'-');
	tmp_datetime = tmp_datetime.replace(/ /g,'-');
	var arr = tmp_datetime.split("-");
	var now = new Date(Date.UTC(arr[0],arr[1]-1,arr[2],arr[3]-8,arr[4],arr[5]));
	return parseInt(now.getTime()/1000);
	}

	function unix_to_datetime(unix) {
	var now = new Date(parseInt(unix) * 1000);
	return now.toLocaleString().replace(/年|月/g, "-").replace(/日/g, " ");
	}
    
    var contents = [
				{value:1,title:"一分区",selected:true},
				{value:2,title:"二分区",selected:false},
				{value:3,title:"三分区",selected:false},
				{value:4,title:"四分区",selected:false},
				{value:5,title:"五分区",selected:false},
				{value:6,title:"六分区",selected:false},
				{value:0,title:"所有分区",selected:false},
			];
	$("#mySelect").select({

		contents:contents
	});


	$("#click_buton").click(function(){
	var depart=document.getElementById("trans_value").value;
    var startDate="2014-09-03 00:00:00";
	var getdate=document.getElementById("getdateval").value;
	var unix_start = datetime_to_unix(startDate);
	var unix_end = datetime_to_unix(getdate);
	var rex=/^-?\d+$/;
	//先判断点击顺序是否正确(先点击日期,在选择分区),在判断提交的日期是否正确
	if (rex.test(depart) == false){
	$("#click_buton").attr("data-content","选择日期后,请再次点下分区!");
		$('#click_buton').popover('show');
		setTimeout(function () {
		   $('#click_buton').popover('hide');
		   $("#click_buton").attr("data-content","您选择的时间小于2014-09-03,从这天开始没有数据!");
		}, 3000);

	} else {		
	if ( unix_end < unix_start ){
	$('#click_buton').popover('show');
		setTimeout(function () {
		   $('#click_buton').popover('hide');
		}, 3000); 	
	}else{
	$('#click_buton').popover('hide');
	alert("开始ajax获取数据!");
	}
	}
	
	
 
	});
});
</script>
</head>
<body>
	<div class="container">
		<div id="datetimepicker2"  class="input-group">
			<input type="text"  class="form-control" id="getdateval" ></input>
			<span  class="input-group-btn add-on input-append">
			    <i data-time-icon="icon-time" data-date-icon="icon-calendar"></i>
			</span>
			<div id="mySelect" style="display:inline;margin-left:5px"></div>
			<button id="click_buton" type="button" class="btn btn-default" data-container="body" data-toggle="popover" data-placement="bottom" data-title="温馨提示" data-content="您选择的时间小于2014-09-03,从这天开始没有数据!" style="margin-left:10px">
                   Go
            </button>
			</div>
		</div>
	</div>
</body>

</html>