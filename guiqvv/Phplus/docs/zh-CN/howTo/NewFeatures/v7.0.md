## php 7.0新特性

* 标量参数类型声明
``` php
//declare(strict_types=1);
function sumOfInts(int ...$ints)
{
    return array_sum($ints);
}
```

* 返回值类型声明
``` php
function arraysSum(array ...$arrays): array
{
    return array_map(function(array $array): int {
        return array_sum($array);
    }, $arrays);
}
```

* null合并运算符
``` php
$username = isset($_GET['user']) ? $_GET['user'] : 'nobody';
等同于:
$username = $_GET['user'] ?? 'nobody';
else:
$username = $_GET['user'] ?? $_POST['user'] ?? 'nobody';
```

* 太空船操作符（组合比较符）
``` php
// Integers
echo 1 <=> 1; // 0
echo 1 <=> 2; // -1
echo 2 <=> 1; // 1
// Floats
echo 1.5 <=> 1.5; // 0
echo 1.5 <=> 2.5; // -1
echo 2.5 <=> 1.5; // 1
// Strings
echo "a" <=> "a"; // 0
echo "a" <=> "b"; // -1
echo "b" <=> "a"; // 1
```

* 通过 define() 定义常量数组
``` php
define('ANIMALS', [
    'dog',
    'cat',
    'bird'
]);
echo ANIMALS[1]; // outputs "cat"
```

* 匿名类
``` php
interface Logger {
    public function log(string $msg);
}
class Application {
    private $logger;
    public function getLogger(): Logger {
         return $this->logger;
    }
    public function setLogger(Logger $logger) {
         $this->logger = $logger;
    }
}
$app = new Application;
$app->setLogger(new class implements Logger {
    public function log(string $msg) {
        echo $msg;
    }
});
var_dump($app->getLogger());
```

* Closure::call()
``` php
class A {private $x = 1;}
$getX = function() {return $this->x;};
echo $getX->call(new A);
```

* 为unserialize()提供过滤
``` php
$data = unserialize($foo, ["allowed_classes" => false]);
$data = unserialize($foo, ["allowed_classes" => ["MyClass", "MyClass2"]);
$data = unserialize($foo, ["allowed_classes" => true]);
```

* Group use declarations
``` php
use some\namespace\{ClassA, ClassB, ClassC as C};
use function some\namespace\{fn_a, fn_b, fn_c};
use const some\namespace\{ConstA, ConstB, ConstC};
```

* intdiv():整数相除取整
``` php
var_dump(intdiv(10, 3));
int(3)
```

## 增加的函数
``` php
random_bytes()
random_int()
error_get_last()
error_clear_last()
Generator::getReturn()
intdiv()
preg_replace_callback_array()
gc_mem_caches()
get_resources()
```
