webpackJsonp([0],{512:function(t,e,r){"use strict";function a(t){n||r(531)}Object.defineProperty(e,"__esModule",{value:!0});var o=r(525),i=r(536),n=!1,s=r(95),l=a,c=s(o.a,i.a,!1,l,null,null);c.options.__file="src/views/detail.vue",e.default=c.exports},514:function(t,e,r){"use strict";var a=Object.prototype.hasOwnProperty,o=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),i=function(t){for(var e;t.length;){var r=t.pop();if(e=r.obj[r.prop],Array.isArray(e)){for(var a=[],o=0;o<e.length;++o)void 0!==e[o]&&a.push(e[o]);r.obj[r.prop]=a}}return e};e.arrayToObject=function(t,e){for(var r=e&&e.plainObjects?Object.create(null):{},a=0;a<t.length;++a)void 0!==t[a]&&(r[a]=t[a]);return r},e.merge=function(t,r,o){if(!r)return t;if("object"!=typeof r){if(Array.isArray(t))t.push(r);else{if("object"!=typeof t)return[t,r];(o.plainObjects||o.allowPrototypes||!a.call(Object.prototype,r))&&(t[r]=!0)}return t}if("object"!=typeof t)return[t].concat(r);var i=t;return Array.isArray(t)&&!Array.isArray(r)&&(i=e.arrayToObject(t,o)),Array.isArray(t)&&Array.isArray(r)?(r.forEach(function(r,i){a.call(t,i)?t[i]&&"object"==typeof t[i]?t[i]=e.merge(t[i],r,o):t.push(r):t[i]=r}),t):Object.keys(r).reduce(function(t,i){var n=r[i];return a.call(t,i)?t[i]=e.merge(t[i],n,o):t[i]=n,t},i)},e.assign=function(t,e){return Object.keys(e).reduce(function(t,r){return t[r]=e[r],t},t)},e.decode=function(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch(e){return t}},e.encode=function(t){if(0===t.length)return t;for(var e="string"==typeof t?t:String(t),r="",a=0;a<e.length;++a){var i=e.charCodeAt(a);45===i||46===i||95===i||126===i||i>=48&&i<=57||i>=65&&i<=90||i>=97&&i<=122?r+=e.charAt(a):i<128?r+=o[i]:i<2048?r+=o[192|i>>6]+o[128|63&i]:i<55296||i>=57344?r+=o[224|i>>12]+o[128|i>>6&63]+o[128|63&i]:(a+=1,i=65536+((1023&i)<<10|1023&e.charCodeAt(a)),r+=o[240|i>>18]+o[128|i>>12&63]+o[128|i>>6&63]+o[128|63&i])}return r},e.compact=function(t){for(var e=[{obj:{o:t},prop:"o"}],r=[],a=0;a<e.length;++a)for(var o=e[a],n=o.obj[o.prop],s=Object.keys(n),l=0;l<s.length;++l){var c=s[l],u=n[c];"object"==typeof u&&null!==u&&-1===r.indexOf(u)&&(e.push({obj:n,prop:c}),r.push(u))}return i(e)},e.isRegExp=function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},e.isBuffer=function(t){return null!==t&&void 0!==t&&!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}},515:function(t,e,r){"use strict";var a=String.prototype.replace,o=/%20/g;t.exports={default:"RFC3986",formatters:{RFC1738:function(t){return a.call(t,o,"+")},RFC3986:function(t){return t}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},516:function(t,e,r){"use strict";function a(t){return Object(i.b)("/request/list",t)}function o(t){return Object(i.a)("/request/detail",t)}e.b=a,e.a=o;var i=r(517)},517:function(t,e,r){"use strict";function a(t,e){return n()({method:"post",url:c.a.api+t,data:l.a.stringify(e),timeout:c.a.timeout})}function o(t,e){return n()({method:"get",url:c.a.api+t,params:e,timeout:c.a.timeout})}e.b=a,e.a=o;var i=r(184),n=r.n(i),s=r(518),l=r.n(s),c=r(521),u=r(96),d=r.n(u);n.a.interceptors.request.use(function(t){return d.a.LoadingBar.start(),t}),n.a.interceptors.response.use(function(t){return d.a.LoadingBar.finish(),t.data})},518:function(t,e,r){"use strict";var a=r(519),o=r(520),i=r(515);t.exports={formats:i,parse:o,stringify:a}},519:function(t,e,r){"use strict";var a=r(514),o=r(515),i={brackets:function(t){return t+"[]"},indices:function(t,e){return t+"["+e+"]"},repeat:function(t){return t}},n=Date.prototype.toISOString,s={delimiter:"&",encode:!0,encoder:a.encode,encodeValuesOnly:!1,serializeDate:function(t){return n.call(t)},skipNulls:!1,strictNullHandling:!1},l=function t(e,r,o,i,n,l,c,u,d,p,f,m){var v=e;if("function"==typeof c)v=c(r,v);else if(v instanceof Date)v=p(v);else if(null===v){if(i)return l&&!m?l(r,s.encoder):r;v=""}if("string"==typeof v||"number"==typeof v||"boolean"==typeof v||a.isBuffer(v)){if(l){return[f(m?r:l(r,s.encoder))+"="+f(l(v,s.encoder))]}return[f(r)+"="+f(String(v))]}var h=[];if(void 0===v)return h;var b;if(Array.isArray(c))b=c;else{var y=Object.keys(v);b=u?y.sort(u):y}for(var g=0;g<b.length;++g){var _=b[g];n&&null===v[_]||(h=Array.isArray(v)?h.concat(t(v[_],o(r,_),o,i,n,l,c,u,d,p,f,m)):h.concat(t(v[_],r+(d?"."+_:"["+_+"]"),o,i,n,l,c,u,d,p,f,m)))}return h};t.exports=function(t,e){var r=t,n=e?a.assign({},e):{};if(null!==n.encoder&&void 0!==n.encoder&&"function"!=typeof n.encoder)throw new TypeError("Encoder has to be a function.");var c=void 0===n.delimiter?s.delimiter:n.delimiter,u="boolean"==typeof n.strictNullHandling?n.strictNullHandling:s.strictNullHandling,d="boolean"==typeof n.skipNulls?n.skipNulls:s.skipNulls,p="boolean"==typeof n.encode?n.encode:s.encode,f="function"==typeof n.encoder?n.encoder:s.encoder,m="function"==typeof n.sort?n.sort:null,v=void 0!==n.allowDots&&n.allowDots,h="function"==typeof n.serializeDate?n.serializeDate:s.serializeDate,b="boolean"==typeof n.encodeValuesOnly?n.encodeValuesOnly:s.encodeValuesOnly;if(void 0===n.format)n.format=o.default;else if(!Object.prototype.hasOwnProperty.call(o.formatters,n.format))throw new TypeError("Unknown format option provided.");var y,g,_=o.formatters[n.format];"function"==typeof n.filter?(g=n.filter,r=g("",r)):Array.isArray(n.filter)&&(g=n.filter,y=g);var w=[];if("object"!=typeof r||null===r)return"";var x;x=n.arrayFormat in i?n.arrayFormat:"indices"in n?n.indices?"indices":"repeat":"indices";var C=i[x];y||(y=Object.keys(r)),m&&y.sort(m);for(var O=0;O<y.length;++O){var j=y[O];d&&null===r[j]||(w=w.concat(l(r[j],j,C,u,d,p?f:null,g,m,v,h,_,b)))}var k=w.join(c),T=!0===n.addQueryPrefix?"?":"";return k.length>0?T+k:""}},520:function(t,e,r){"use strict";var a=r(514),o=Object.prototype.hasOwnProperty,i={allowDots:!1,allowPrototypes:!1,arrayLimit:20,decoder:a.decode,delimiter:"&",depth:5,parameterLimit:1e3,plainObjects:!1,strictNullHandling:!1},n=function(t,e){for(var r={},a=e.ignoreQueryPrefix?t.replace(/^\?/,""):t,n=e.parameterLimit===1/0?void 0:e.parameterLimit,s=a.split(e.delimiter,n),l=0;l<s.length;++l){var c,u,d=s[l],p=d.indexOf("]="),f=-1===p?d.indexOf("="):p+1;-1===f?(c=e.decoder(d,i.decoder),u=e.strictNullHandling?null:""):(c=e.decoder(d.slice(0,f),i.decoder),u=e.decoder(d.slice(f+1),i.decoder)),o.call(r,c)?r[c]=[].concat(r[c]).concat(u):r[c]=u}return r},s=function(t,e,r){for(var a=e,o=t.length-1;o>=0;--o){var i,n=t[o];if("[]"===n)i=[],i=i.concat(a);else{i=r.plainObjects?Object.create(null):{};var s="["===n.charAt(0)&&"]"===n.charAt(n.length-1)?n.slice(1,-1):n,l=parseInt(s,10);!isNaN(l)&&n!==s&&String(l)===s&&l>=0&&r.parseArrays&&l<=r.arrayLimit?(i=[],i[l]=a):i[s]=a}a=i}return a},l=function(t,e,r){if(t){var a=r.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t,i=/(\[[^[\]]*])/,n=/(\[[^[\]]*])/g,l=i.exec(a),c=l?a.slice(0,l.index):a,u=[];if(c){if(!r.plainObjects&&o.call(Object.prototype,c)&&!r.allowPrototypes)return;u.push(c)}for(var d=0;null!==(l=n.exec(a))&&d<r.depth;){if(d+=1,!r.plainObjects&&o.call(Object.prototype,l[1].slice(1,-1))&&!r.allowPrototypes)return;u.push(l[1])}return l&&u.push("["+a.slice(l.index)+"]"),s(u,e,r)}};t.exports=function(t,e){var r=e?a.assign({},e):{};if(null!==r.decoder&&void 0!==r.decoder&&"function"!=typeof r.decoder)throw new TypeError("Decoder has to be a function.");if(r.ignoreQueryPrefix=!0===r.ignoreQueryPrefix,r.delimiter="string"==typeof r.delimiter||a.isRegExp(r.delimiter)?r.delimiter:i.delimiter,r.depth="number"==typeof r.depth?r.depth:i.depth,r.arrayLimit="number"==typeof r.arrayLimit?r.arrayLimit:i.arrayLimit,r.parseArrays=!1!==r.parseArrays,r.decoder="function"==typeof r.decoder?r.decoder:i.decoder,r.allowDots="boolean"==typeof r.allowDots?r.allowDots:i.allowDots,r.plainObjects="boolean"==typeof r.plainObjects?r.plainObjects:i.plainObjects,r.allowPrototypes="boolean"==typeof r.allowPrototypes?r.allowPrototypes:i.allowPrototypes,r.parameterLimit="number"==typeof r.parameterLimit?r.parameterLimit:i.parameterLimit,r.strictNullHandling="boolean"==typeof r.strictNullHandling?r.strictNullHandling:i.strictNullHandling,""===t||null===t||void 0===t)return r.plainObjects?Object.create(null):{};for(var o="string"==typeof t?n(t,r):t,s=r.plainObjects?Object.create(null):{},c=Object.keys(o),u=0;u<c.length;++u){var d=c[u],p=l(d,o[d],r);s=a.merge(s,p,r)}return a.compact(s)}},521:function(t,e,r){"use strict";var a=r(522),o={env:a.a,api:"api.php?",timeout:5e3};e.a=o},522:function(t,e,r){"use strict";e.a="production"},525:function(t,e,r){"use strict";var a=r(185),o=r.n(a),i=r(97),n=(r.n(i),r(183),r(516)),s=r(532),l=r(534);e.a={components:{MaxChart:s.a,ModalTable:l.a},data:function(){return{scrollTop:0,tableLoading:!1,baseRequestId:"",baseRequestApp:"",baseUrl:"",baseMethod:"",baseRequestTime:"",baseCostTime:"",baseHost:"",yellowWtTime:0,redWtTime:0,kvColumns:[{title:"名称",key:"name"},{title:"值",key:"value"}],profileColumns:[{title:"函数/方法",key:"call",width:"20%"},{title:"调用",key:"ct",sortable:!0,align:"right"},{title:"时间 (μs)",key:"wt",sortable:!0,render:function(t,e){return Object(i.sprintf)("%d (%s%%)",e.row.wt,e.row.wt_rate)}},{title:"CPU (μs)",key:"cpu",sortable:!0},{title:"内存 (bytes)",key:"mu",sortable:!0},{title:"内存峰值 (bytes)",key:"pmu",sortable:!0},{title:"Excl.时间 (μs)",key:"excl_wt",sortable:!0,render:function(t,e){return Object(i.sprintf)("%d (%s%%)",e.row.excl_wt,e.row.excl_wt_rate)}},{title:"Excl.CPU (μs)",key:"excl_cpu",sortable:!0},{title:"Excl.内存 (bytes)",key:"excl_mu",sortable:!0},{title:"Excl.内存峰值 (bytes)",key:"excl_pmu",sortable:!0}],statDatas:[],getDatas:[],postDatas:[],cookieDatas:[],serverDatas:[],profileDatas:[],maxWallTimeData:[]}},computed:{requestFullUrl:function(){return this.baseHost+this.baseUrl}},methods:{init:function(){this.getRequestDetailApi()},getRequestDetailApi:function(){var t=this;this.tableLoading=!0;var e={request_id:this.$route.query["request-id"]};Object(n.a)(e).then(function(e){e.errno?t.$Message.error("Internet Server Error:"+e.message):(t.profileDatas=e.data.profile,t.baseRequestId=e.data.base.request_id,t.baseRequestApp=e.data.base.app,t.baseUrl=e.data.base.url,t.baseMethod=e.data.base.method,t.baseRequestTime=e.data.base.request_time,t.baseHost=e.data.base.host,t.yellowWtTime=e.data.alert_wt_time.yellow,t.redWtTime=e.data.alert_wt_time.red,t.getDatas=e.data.get,t.postDatas=e.data.post,t.cookieDatas=e.data.cookie,t.serverDatas=e.data.server,t.maxWallTimeData=e.data.top_walltime_profile,t.statDatas=[{name:"请求执行时间",value:e.data.base.cost_time},{name:"CPU时间",value:e.data.base.cpu_time},{name:"内存使用",value:e.data.base.memory},{name:"内存峰值",value:e.data.base.pmemory}],t.tableLoading=!1)}).catch(function(e){t.tableLoading=!1,t.$Message.error("Network error:"+e)})},handleScroll:function(){var t=o()("#profile-data .ivu-table-header"),e=o()(window);t.offset().top-e.scrollTop()<=60&&(t.hasClass("header-fixed")||(t.addClass("header-fixed"),this.scrollTop=e.scrollTop())),this.scrollTop&&e.scrollTop()<this.scrollTop&&t.hasClass("header-fixed")&&(t.removeClass("header-fixed"),this.scrollTop=0)},bindScrollEvent:function(){o()(document).on("scroll",this.handleScroll)},removeScrollEvent:function(){o()(document).off("scroll",this.handleScroll)},rowClassName:function(t,e){return t.excl_wt>=this.redWtTime?"table-error-row":t.excl_wt>=this.yellowWtTime?"table-warning-row":""},eventBack:function(){window.history.length>1&&document.referrer?this.$router.back(-1):this.$router.push("/")}},mounted:function(){},destroyed:function(){this.removeScrollEvent()},activated:function(){this.init(),this.bindScrollEvent()}}},526:function(t,e,r){"use strict";var a=r(98),o=r.n(a),i=r(97);r.n(i);e.a={name:"maxChart",data:function(){return{}},props:{chartData:Array,redWallTime:Number,chartTitle:String,maxChartId:String},mounted:function(){var t=this;this.$nextTick(function(){var e=o.a.init(document.getElementById(t.maxChartId)),r=[],a=[];t.chartData.forEach(function(e){var o=e.excl_wt>=t.redWallTime?"path://M10.031 32c-2.133-4.438-0.997-6.981 0.642-9.376 1.795-2.624 2.258-5.221 2.258-5.221s1.411 1.834 0.847 4.703c2.493-2.775 2.963-7.196 2.587-8.889 5.635 3.938 8.043 12.464 4.798 18.783 17.262-9.767 4.294-24.38 2.036-26.027 0.753 1.646 0.895 4.433-0.625 5.785-2.573-9.759-8.937-11.759-8.937-11.759 0.753 5.033-2.728 10.536-6.084 14.648-0.118-2.007-0.243-3.392-1.298-5.312-0.237 3.646-3.023 6.617-3.777 10.27-1.022 4.946 0.765 8.568 7.555 12.394z":"roundRect";r.push({name:e.call,type:"bar",data:[e.excl_wt]}),a.push({name:e.call,icon:o})});var n=t.chartTitle,s={title:{text:n,textStyle:{color:"#495060",fontSize:16}},legend:{top:"70%",itemWidth:14,left:"5%",data:a,tooltip:{show:!0}},grid:{height:"50%"},xAxis:{data:[""]},yAxis:{},series:r,tooltip:{show:!0,formatter:function(e){var r=t.chartData[e.seriesIndex];return Object(i.sprintf)("函数/方法: %s <br/>调用次数: %s <br/>Excl.执行时间: %s μs (%s%%)<br/>Excl.CPU: %s μs (%s%%)<br/>Excl.内存: %s bytes (%s%%)<br/>Excl.内存峰值: %s bytes (%s%%)",r.call,r.ct,r.excl_wt,r.excl_wt_rate,r.excl_cpu,r.excl_cpu_rate,r.excl_mu,r.excl_mu_rate,r.excl_pmu,r.excl_pmu_rate)}}};e.setOption(s),window.addEventListener("resize",function(){e.resize()})})}}},527:function(t,e,r){"use strict";e.a={name:"modalTable",props:{columns:Array,data:Array,title:String},data:function(){return{isShow:!1}},methods:{close:function(){this.isShow=!1}}}},531:function(t,e){},532:function(t,e,r){"use strict";var a=r(526),o=r(533),i=r(95),n=i(a.a,o.a,!1,null,null,null);n.options.__file="src/views/components/detail/maxChart.vue",e.a=n.exports},533:function(t,e,r){"use strict";var a=function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticStyle:{width:"100%",height:"400px"},attrs:{id:t.maxChartId}})},o=[];a._withStripped=!0;var i={render:a,staticRenderFns:o};e.a=i},534:function(t,e,r){"use strict";var a=r(527),o=r(535),i=r(95),n=i(a.a,o.a,!1,null,null,null);n.options.__file="src/views/components/detail/modalTable.vue",e.a=n.exports},535:function(t,e,r){"use strict";var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t.data.length?r("p",{staticStyle:{"font-size":"12px"}},[r("a",{on:{click:function(e){t.isShow=!0}}},[t._v("查看数据, 共"+t._s(t.data.length)+"条")])]):r("p",{staticStyle:{"font-size":"12px"}},[t._v("暂无数据")]),t._v(" "),r("Modal",{attrs:{title:t.title},model:{value:t.isShow,callback:function(e){t.isShow=e},expression:"isShow"}},[r("Table",{attrs:{columns:t.columns,data:t.data}}),t._v(" "),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("Button",{attrs:{type:"info"},on:{click:t.close}},[t._v("关闭")])],1)],1)],1)},o=[];a._withStripped=!0;var i={render:a,staticRenderFns:o};e.a=i},536:function(t,e,r){"use strict";var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"ivu-article"},[r("Card",{staticClass:"margin-bottom-10",attrs:{shadow:!0}},[r("h4",[r("a",{on:{click:t.eventBack}},[r("Icon",{attrs:{type:"arrow-return-left"}}),t._v(" 返回列表")],1)]),t._v(" "),r("h2",[t._v(t._s(t.baseMethod)+" "+t._s(t.requestFullUrl))]),t._v(" "),r("h4",[t._v("请求执行时间: "+t._s(t.baseRequestTime))]),t._v(" "),r("h4",[t._v("应用信息: "+t._s(t.baseRequestApp))]),t._v(" "),r("h4",[t._v("Request-ID: "+t._s(t.baseRequestId))])]),t._v(" "),r("Card",{staticClass:"margin-bottom-10",attrs:{shadow:!0}},[r("Row",[r("Col",{attrs:{span:"6"}},[r("div",{staticStyle:{"padding-right":"30px","border-right":"2px solid #ddd"}},[r("div",{staticClass:"margin-top-5"},[r("h3",{staticClass:"stitle"},[t._v("基础指标")]),t._v(" "),r("Table",{attrs:{loading:t.tableLoading,"show-header":!1,columns:t.kvColumns,data:t.statDatas}})],1),t._v(" "),r("div",{staticClass:"margin-top-10"},[r("h3",{staticClass:"stitle"},[t._v("GET")]),t._v(" "),r("modal-table",{attrs:{columns:t.kvColumns,data:t.getDatas,title:"GET 数据"}})],1),t._v(" "),r("div",{staticClass:"margin-top-10"},[r("h3",{staticClass:"stitle"},[t._v("POST")]),t._v(" "),r("modal-table",{attrs:{columns:t.kvColumns,data:t.postDatas,title:"POST 数据"}})],1),t._v(" "),r("div",{staticClass:"margin-top-10"},[r("h3",{staticClass:"stitle"},[t._v("COOKIE")]),t._v(" "),r("modal-table",{attrs:{columns:t.kvColumns,data:t.cookieDatas,title:"COOKIE 数据"}})],1),t._v(" "),r("div",{staticClass:"margin-top-10"},[r("h3",{staticClass:"stitle"},[t._v("SERVER")]),t._v(" "),r("modal-table",{attrs:{columns:t.kvColumns,data:t.serverDatas,title:"SERVER 数据"}})],1)])]),t._v(" "),r("Col",{attrs:{span:"18"}},[r("div",{staticStyle:{"padding-left":"30px"}},[r("div",{staticClass:"margin-top-5"},[t.maxWallTimeData.length?r("max-chart",{attrs:{"max-chart-id":"max-wall-time-chart-id","chart-data":t.maxWallTimeData,"red-wall-time":t.redWtTime,"chart-title":"独占调用耗时 Top 10"}}):t._e()],1)])])],1)],1),t._v(" "),r("Card",{staticClass:"margin-bottom-10",attrs:{shadow:!0}},[r("Row",[r("Col",{attrs:{span:"24"}},[r("Table",{attrs:{"row-class-name":t.rowClassName,id:"profile-data",loading:t.tableLoading,columns:t.profileColumns,data:t.profileDatas}})],1)],1)],1)],1)},o=[];a._withStripped=!0;var i={render:a,staticRenderFns:o};e.a=i}});