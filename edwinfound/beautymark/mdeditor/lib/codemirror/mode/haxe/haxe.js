(function(l){"object"==typeof exports&&"object"==typeof module?l(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],l):l(CodeMirror)})(function(l){l.defineMode("haxe",function(m,E){function r(a,d){for(var c=!1,b;null!=(b=a.next());){if(b==d&&!c)return!1;c=!c&&"\\"==b}return c}function n(a,d,c){w=a;I=c;return d}function l(a,d){var c=a.next();if('"'==c||"'"==c)return c=T(c),d.tokenize=c,c(a,d);if(/[\[\]{}\(\),;\:\.]/.test(c))return n(c);if("0"==c&&
a.eat(/x/i))return a.eatWhile(/[\da-f]/i),n("number","number");if(/\d/.test(c)||"-"==c&&a.eat(/\d/))return a.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),n("number","number");if(d.reAllowed&&"~"==c&&a.eat(/\//))return r(a,"/"),a.eatWhile(/[gimsu]/),n("regexp","string-2");if("/"==c){if(a.eat("*"))return c=U,d.tokenize=c,c(a,d);if(a.eat("/"))return a.skipToEnd(),n("comment","comment");a.eatWhile(F);return n("operator",null,a.current())}if("#"==c)return a.skipToEnd(),n("conditional","meta");if("@"==c)return a.eat(/:/),
a.eatWhile(/[\w_]/),n("metadata","meta");if(F.test(c))return a.eatWhile(F),n("operator",null,a.current());if(/[A-Z]/.test(c))return a.eatWhile(/[\w_<>]/),c=a.current(),n("type","variable-3",c);a.eatWhile(/[\w_]/);var c=a.current(),b=J.propertyIsEnumerable(c)&&J[c];return b&&d.kwAllowed?n(b.type,b.style,c):n("variable","variable",c)}function T(a){return function(d,c){r(d,a)||(c.tokenize=l);return n("string","string")}}function U(a,d){for(var c=!1,b;b=a.next();){if("/"==b&&c){d.tokenize=l;break}c="*"==
b}return n("comment","comment")}function K(a,d,b,f,h,k){this.indented=a;this.column=d;this.type=b;this.prev=h;this.info=k;null!=f&&(this.align=f)}function L(a){for(var d=h.state,b=d.importedtypes;b;b=b.next)if(b.name==a)return;d.importedtypes={name:a,next:d.importedtypes}}function v(){for(var a=arguments.length-1;0<=a;a--)h.cc.push(arguments[a])}function b(){v.apply(null,arguments);return!0}function A(a){var b=h.state;if(b.context){h.marked="def";for(var c=b.localVars;c;c=c.next)if(c.name==a)return;
b.localVars={name:a,next:b.localVars}}}function B(){h.state.context||(h.state.localVars=V);h.state.context={prev:h.state.context,vars:h.state.localVars}}function C(){h.state.localVars=h.state.context.vars;h.state.context=h.state.context.prev}function e(a,b){var c=function(){var c=h.state;c.lexical=new K(c.indented,h.stream.column(),a,null,c.lexical,b)};c.lex=!0;return c}function g(){var a=h.state;a.lexical.prev&&(")"==a.lexical.type&&(a.indented=a.lexical.indented),a.lexical=a.lexical.prev)}function p(a){function d(c){return c==
a?b():";"==a?v():b(d)}return d}function t(a){return"@"==a?b(M):"var"==a?b(e("vardef"),G,p(";"),g):"keyword a"==a?b(e("form"),q,t,g):"keyword b"==a?b(e("form"),t,g):"{"==a?b(e("}"),B,H,g,C):";"==a?b():"attribute"==a?b(N):"function"==a?b(y):"for"==a?b(e("form"),p("("),e(")"),W,p(")"),g,t,g):"variable"==a?b(e("stat"),X):"switch"==a?b(e("form"),q,e("}","switch"),p("{"),H,g,g):"case"==a?b(q,p(":")):"default"==a?b(p(":")):"catch"==a?b(e("form"),B,p("("),O,p(")"),t,g,C):"import"==a?b(P,p(";")):"typedef"==
a?b(Y):v(e("stat"),q,p(";"),g)}function q(a){return Q.hasOwnProperty(a)?b(u):"function"==a?b(y):"keyword c"==a?b(R):"("==a?b(e(")"),R,p(")"),g,u):"operator"==a?b(q):"["==a?b(e("]"),x(q,"]"),g,u):"{"==a?b(e("}"),x(Z,"}"),g,u):b()}function R(a){return a.match(/[;\}\)\],]/)?v():v(q)}function u(a,d){if("operator"==a&&/\+\+|--/.test(d))return b(u);if("operator"==a||":"==a)return b(q);if(";"!=a){if("("==a)return b(e(")"),x(q,")"),g,u);if("."==a)return b(aa,u);if("["==a)return b(e("]"),q,p("]"),g,u)}}function N(a){if("attribute"==
a)return b(N);if("function"==a)return b(y);if("var"==a)return b(G)}function M(a){if(":"==a||"variable"==a)return b(M);if("("==a)return b(e(")"),x(ba,")"),g,t)}function ba(a){if("variable"==a)return b()}function P(a,d){if("variable"==a&&/[A-Z]/.test(d.charAt(0)))return L(d),b();if("variable"==a||"property"==a||"."==a||"*"==d)return b(P)}function Y(a,d){if("variable"==a&&/[A-Z]/.test(d.charAt(0)))return L(d),b();if("type"==a&&/[A-Z]/.test(d.charAt(0)))return b()}function X(a){return":"==a?b(g,t):v(u,
p(";"),g)}function aa(a){if("variable"==a)return h.marked="property",b()}function Z(a){"variable"==a&&(h.marked="property");if(Q.hasOwnProperty(a))return b(p(":"),q)}function x(a,d){function c(f){return","==f?b(a,c):f==d?b():b(p(d))}return function(f){return f==d?b():v(a,c)}}function H(a){return"}"==a?b():v(t,H)}function G(a,d){return"variable"==a?(A(d),b(D,S)):b()}function S(a,d){if("="==d)return b(q,S);if(","==a)return b(G)}function W(a,d){"variable"==a&&A(d);return b(e(")"),B,ca,q,g,t,C)}function ca(a,
d){if("in"==d)return b()}function y(a,d){if("variable"==a)return A(d),b(y);if("new"==d)return b(y);if("("==a)return b(e(")"),B,x(O,")"),g,D,t,C)}function D(a){if(":"==a)return b(da)}function da(a){if("type"==a||"variable"==a)return b();if("{"==a)return b(e("}"),x(ea,"}"),g)}function ea(a){if("variable"==a)return b(D)}function O(a,d){if("variable"==a)return A(d),b(D)}var z=m.indentUnit,J=function(){function a(a){return{type:a,style:"keyword"}}var b=a("keyword a"),c=a("keyword b"),f=a("keyword c"),
h=a("operator"),k={type:"atom",style:"atom"},g={type:"attribute",style:"attribute"},e=a("typedef");return{"if":b,"while":b,"else":c,"do":c,"try":c,"return":f,"break":f,"continue":f,"new":f,"throw":f,"var":a("var"),inline:g,"static":g,using:a("import"),"public":g,"private":g,cast:a("cast"),"import":a("import"),macro:a("macro"),"function":a("function"),"catch":a("catch"),untyped:a("untyped"),callback:a("cb"),"for":a("for"),"switch":a("switch"),"case":a("case"),"default":a("default"),"in":h,never:a("property_access"),
trace:a("trace"),"class":e,"abstract":e,"enum":e,"interface":e,typedef:e,"extends":e,"implements":e,dynamic:e,"true":k,"false":k,"null":k}}(),F=/[+\-*&%=<>!?|]/,w,I,Q={atom:!0,number:!0,variable:!0,string:!0,regexp:!0},h={state:null,column:null,marked:null,cc:null},V={name:"this",next:null};g.lex=!0;return{startState:function(a){return{tokenize:l,reAllowed:!0,kwAllowed:!0,cc:[],lexical:new K((a||0)-z,0,"block",!1),localVars:E.localVars,importedtypes:"Int Float String Void Std Bool Dynamic Array".split(" "),
context:E.localVars&&{vars:E.localVars},indented:0}},token:function(a,b){a.sol()&&(b.lexical.hasOwnProperty("align")||(b.lexical.align=!1),b.indented=a.indentation());if(a.eatSpace())return null;var c=b.tokenize(a,b);if("comment"==w)return c;b.reAllowed=!("operator"!=w&&"keyword c"!=w&&!w.match(/^[\[{}\(,;:]$/));b.kwAllowed="."!=w;a:{var f=w,e=I,k=b.cc;h.state=b;h.stream=a;h.marked=null;h.cc=k;b.lexical.hasOwnProperty("align")||(b.lexical.align=!0);for(;;)if((k.length?k.pop():t)(f,e)){for(;k.length&&
k[k.length-1].lex;)k.pop()();if(h.marked){c=h.marked;break a}if(k="variable"==f)b:{for(k=b.localVars;k;k=k.next)if(k.name==e){k=!0;break b}k=void 0}if(k){c="variable-2";break a}if(f="variable"==f)b:if(f=b,/[a-z]/.test(e.charAt(0)))f=!1;else{for(var k=f.importedtypes.length,g=0;g<k;g++)if(f.importedtypes[g]==e){f=!0;break b}f=void 0}if(f){c="variable-3";break a}break a}}return c},indent:function(a,b){if(a.tokenize!=l)return 0;var c=b&&b.charAt(0),f=a.lexical;"stat"==f.type&&"}"==c&&(f=f.prev);var e=
f.type,g=c==e;return"vardef"==e?f.indented+4:"form"==e&&"{"==c?f.indented:"stat"==e||"form"==e?f.indented+z:"switch"!=f.info||g?f.align?f.column+(g?0:1):f.indented+(g?0:z):f.indented+(/^(?:case|default)\b/.test(b)?z:2*z)},electricChars:"{}",blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:"//"}});l.defineMIME("text/x-haxe","haxe");l.defineMode("hxml",function(){return{startState:function(){return{define:!1,inString:!1}},token:function(m,l){var r=m.peek(),n=m.sol();if("#"==r)return m.skipToEnd(),
"comment";if(n&&"-"==r)return r="variable-2",m.eat(/-/),"-"==m.peek()&&(m.eat(/-/),r="keyword a"),"D"==m.peek()&&(m.eat(/[D]/),r="keyword c",l.define=!0),m.eatWhile(/[A-Z]/i),r;r=m.peek();0==l.inString&&"'"==r&&(l.inString=!0,m.next());if(1==l.inString)return m.skipTo("'")||m.skipToEnd(),"'"==m.peek()&&(m.next(),l.inString=!1),"string";m.next();return null},lineComment:"#"}});l.defineMIME("text/x-hxml","hxml")});