(function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],b):b(CodeMirror)})(function(b){b.registerGlobalHelper("fold","comment",function(b){return b.blockCommentStart&&b.blockCommentEnd},function(g,m){var h=g.getModeAt(m),n=h.blockCommentStart,h=h.blockCommentEnd;if(n&&h){for(var d=m.line,e=g.getLine(d),a=m.ch,f=0;;)if(a=0>=a?-1:e.lastIndexOf(n,a-1),-1==a){if(1==f)return;f=1;a=e.length}else{if(1==
f&&a<m.ch)return;if(/comment/.test(g.getTokenTypeAt(b.Pos(d,a+1)))){e=a+n.length;break}--a}var f=1,a=g.lastLine(),p,r,k=d;a:for(;k<=a;++k)for(var l=g.getLine(k),c=k==d?e:0;;){var q=l.indexOf(n,c),c=l.indexOf(h,c);0>q&&(q=l.length);0>c&&(c=l.length);c=Math.min(q,c);if(c==l.length)break;if(c==q)++f;else if(!--f){p=k;r=c;break a}++c}if(null!=p&&(d!=p||r!=e))return{from:b.Pos(d,e),to:b.Pos(p,r)}}})});