!function(){function J(a,c){if(!a||"function"==typeof a)return c;var b={},d;for(d in c)b[d]=c[d];for(d in a)a[d]&&(b[d]="object"==typeof b[d]?J(b[d],a[d]):a[d]);return b}function K(a,c,b){var d,e,f="M{0},{1}";d=2;for(e=2*b.length+2;e>d;d+=2)f+=" L{"+d+"},{"+(d+1)+"}";c=[c.x,c.y];d=0;for(e=b.length;e>d;d++)c.push(b[d].x),c.push(b[d].y);b=a.paper.path(f,c);b.attr("stroke",a.options["element-color"]);b.attr("stroke-width",a.options["line-width"]);d=a.options.font;e=a.options["font-family"];a=a.options["font-weight"];
return d&&b.attr({font:d}),e&&b.attr({"font-family":e}),a&&b.attr({"font-weight":a}),b}function x(a,c,b,d){var e,f;"[object Array]"!==Object.prototype.toString.call(b)&&(b=[b]);var h="M{0},{1}";e=2;for(f=2*b.length+2;f>e;e+=2)h+=" L{"+e+"},{"+(e+1)+"}";var l=[c.x,c.y];e=0;for(f=b.length;f>e;e++)l.push(b[e].x),l.push(b[e].y);e=a.paper.path(h,l);e.attr({stroke:a.options["line-color"],"stroke-width":a.options["line-width"],"arrow-end":a.options["arrow-end"]});f=a.options.font;h=a.options["font-family"];
l=a.options["font-weight"];if(f&&e.attr({font:f}),h&&e.attr({"font-family":h}),l&&e.attr({"font-weight":l}),d){d=a.paper.text(0,0,d);var q=!1;c.y===b[0].y&&(q=!0);var n=b=0;b=c.x;n=c.y;q?(b+=a.options["text-margin"]/2,n-=a.options["text-margin"]):(b+=a.options["text-margin"]/2,n+=a.options["text-margin"]);d.attr({"text-anchor":"start","font-size":a.options["font-size"],fill:a.options["font-color"],x:b,y:n});f&&d.attr({font:f});h&&d.attr({"font-family":h});l&&d.attr({"font-weight":l})}return e}function A(a,
c){c=c||{};this.paper=new Raphael(a);this.options=t.defaults(c,P);this.symbols=[];this.lines=[];this.start=null}function k(a,c,b){this.chart=a;this.group=this.chart.paper.set();this.symbol=b;this.connectedTo=[];this.symbolType=c.symbolType;this.flowstate=c.flowstate||"future";this.next_direction=c.next&&c.direction_next?c.direction_next:void 0;this.text=this.chart.paper.text(0,0,c.text);c.key&&(this.text.node.id=c.key+"t");this.text.node.setAttribute("class",this.getAttr("class")+"t");this.text.attr({"text-anchor":"start",
x:this.getAttr("text-margin"),fill:this.getAttr("font-color"),"font-size":this.getAttr("font-size")});a=this.getAttr("font");var d=this.getAttr("font-family"),e=this.getAttr("font-weight");a&&this.text.attr({font:a});d&&this.text.attr({"font-family":d});e&&this.text.attr({"font-weight":e});c.link&&this.text.attr("href",c.link);c.target&&this.text.attr("target",c.target);if(a=this.getAttr("maxWidth")){for(var d=c.text.split(" "),e="",f=0,h=d.length;h>f;f++){var l=d[f];this.text.attr("text",e+" "+l);
e+=this.text.getBBox().width>a?"\n"+l:" "+l}this.text.attr("text",e.substring(1))}if(this.group.push(this.text),b)a=this.getAttr("text-margin"),b.attr({fill:this.getAttr("fill"),stroke:this.getAttr("element-color"),"stroke-width":this.getAttr("line-width"),width:this.text.getBBox().width+2*a,height:this.text.getBBox().height+2*a}),b.node.setAttribute("class",this.getAttr("class")),c.link&&b.attr("href",c.link),c.target&&b.attr("target",c.target),c.key&&(b.node.id=c.key),this.group.push(b),b.insertBefore(this.text),
this.text.attr({y:b.getBBox().height/2}),this.initialize()}function L(a,c){var b=a.paper.rect(0,0,0,0,20);c=c||{};c.text=c.text||"Start";k.call(this,a,c,b)}function M(a,c){var b=a.paper.rect(0,0,0,0,20);c=c||{};c.text=c.text||"End";k.call(this,a,c,b)}function N(a,c){var b=a.paper.rect(0,0,0,0);c=c||{};k.call(this,a,c,b)}function O(a,c){var b=a.paper.rect(0,0,0,0);c=c||{};k.call(this,a,c,b);b.attr({width:this.text.getBBox().width+4*this.getAttr("text-margin")});this.text.attr({x:2*this.getAttr("text-margin")});
b=a.paper.rect(0,0,0,0);b.attr({x:this.getAttr("text-margin"),stroke:this.getAttr("element-color"),"stroke-width":this.getAttr("line-width"),width:this.text.getBBox().width+2*this.getAttr("text-margin"),height:this.text.getBBox().height+2*this.getAttr("text-margin"),fill:this.getAttr("fill")});c.key&&(b.node.id=c.key+"i");var d=this.getAttr("font"),e=this.getAttr("font-family"),f=this.getAttr("font-weight");d&&b.attr({font:d});e&&b.attr({"font-family":e});f&&b.attr({"font-weight":f});c.link&&b.attr("href",
c.link);c.target&&b.attr("target",c.target);this.group.push(b);b.insertBefore(this.text);this.initialize()}function E(a,c){c=c||{};k.call(this,a,c);this.textMargin=this.getAttr("text-margin");this.text.attr({x:3*this.textMargin});var b=this.text.getBBox().width+4*this.textMargin,d=this.text.getBBox().height+2*this.textMargin,e=this.textMargin,f=d/2,b=K(a,{x:e,y:f},[{x:e-this.textMargin,y:d},{x:e-this.textMargin+b,y:d},{x:e-this.textMargin+b+2*this.textMargin,y:0},{x:e-this.textMargin+2*this.textMargin,
y:0},{x:e,y:f}]);b.attr({stroke:this.getAttr("element-color"),"stroke-width":this.getAttr("line-width"),fill:this.getAttr("fill")});c.link&&b.attr("href",c.link);c.target&&b.attr("target",c.target);c.key&&(b.node.id=c.key);b.node.setAttribute("class",this.getAttr("class"));this.text.attr({y:b.getBBox().height/2});this.group.push(b);b.insertBefore(this.text);this.initialize()}function z(a,c){c=c||{};k.call(this,a,c);this.textMargin=this.getAttr("text-margin");this.yes_direction="bottom";this.no_direction=
"right";c.yes&&c.direction_yes&&c.no&&!c.direction_no?"right"===c.direction_yes?(this.no_direction="bottom",this.yes_direction="right"):(this.no_direction="right",this.yes_direction="bottom"):c.yes&&!c.direction_yes&&c.no&&c.direction_no?"right"===c.direction_no?(this.yes_direction="bottom",this.no_direction="right"):(this.yes_direction="right",this.no_direction="bottom"):(this.yes_direction="bottom",this.no_direction="right");this.yes_direction=this.yes_direction||"bottom";this.no_direction=this.no_direction||
"right";this.text.attr({x:2*this.textMargin});var b=this.text.getBBox().width+3*this.textMargin,b=b+b/2,d=this.text.getBBox().height+2*this.textMargin,d=Math.max(.5*b,d+d/2),e=b/4,f=d/4;this.text.attr({x:e+this.textMargin/2});b=K(a,{x:e,y:f},[{x:e-b/4,y:f+d/4},{x:e-b/4+b/2,y:f+d/4+d/2},{x:e-b/4+b,y:f+d/4},{x:e-b/4+b/2,y:f+d/4-d/2},{x:e-b/4,y:f+d/4}]);b.attr({stroke:this.getAttr("element-color"),"stroke-width":this.getAttr("line-width"),fill:this.getAttr("fill")});c.link&&b.attr("href",c.link);c.target&&
b.attr("target",c.target);c.key&&(b.node.id=c.key);b.node.setAttribute("class",this.getAttr("class"));this.text.attr({y:b.getBBox().height/2});this.group.push(b);b.insertBefore(this.text);this.initialize()}Array.prototype.indexOf||(Array.prototype.indexOf=function(a){if(null===this)throw new TypeError;var c=Object(this),b=c.length>>>0;if(0===b)return-1;var d=0;if(0<arguments.length&&(d=Number(arguments[1]),d!=d?d=0:0!==d&&1/0!=d&&d!=-1/0&&(d=(0<d||-1)*Math.floor(Math.abs(d)))),d>=b)return-1;for(d=
0<=d?d:Math.max(b-Math.abs(d),0);b>d;d++)if(d in c&&c[d]===a)return d;return-1});Array.prototype.lastIndexOf||(Array.prototype.lastIndexOf=function(a){if(null===this)throw new TypeError;var c=Object(this),b=c.length>>>0;if(0===b)return-1;var d=b;1<arguments.length&&(d=Number(arguments[1]),d!=d?d=0:0!==d&&d!=1/0&&d!=-(1/0)&&(d=(0<d||-1)*Math.floor(Math.abs(d))));for(b=0<=d?Math.min(d,b-1):b-Math.abs(d);0<=b;b--)if(b in c&&c[b]===a)return b;return-1});String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,
"")});var H={};"undefined"!=typeof module&&module.exports?module.exports=H:this.flowchart=this.flowchart||H;var P={x:0,y:0,"line-width":3,"line-length":50,"text-margin":10,"font-size":14,"font-color":"black","line-color":"black","element-color":"black",fill:"white","yes-text":"yes","no-text":"no","arrow-end":"block","class":"flowchart",symbols:{start:{},end:{},condition:{},inputoutput:{},operation:{},subroutine:{}}},t={defaults:J,inherits:function(a,c){if("function"==typeof Object.create)a.super_=
c,a.prototype=Object.create(c.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});else{a.super_=c;var b=function(){};b.prototype=c.prototype;a.prototype=new b;a.prototype.constructor=a}}};A.prototype.handle=function(a){-1>=this.symbols.indexOf(a)&&this.symbols.push(a);var c=this;return a instanceof z?(a.yes=function(b){return a.yes_symbol=b,a.no_symbol&&(a.pathOk=!0),c.handle(b)},a.no=function(b){return a.no_symbol=b,a.yes_symbol&&(a.pathOk=!0),c.handle(b)}):a.then=function(b){return a.next=
b,a.pathOk=!0,c.handle(b)},a};A.prototype.startWith=function(a){return this.start=a,this.handle(a)};A.prototype.render=function(){for(var a,c=0,b=0,d=0,e=0,f=0,h=0,d=0,e=this.symbols.length;e>d;d++)a=this.symbols[d],a.width>c&&(c=a.width),a.height>b&&(b=a.height);d=0;for(e=this.symbols.length;e>d;d++)a=this.symbols[d],a.shiftX(this.options.x+(c-a.width)/2+this.options["line-width"]),a.shiftY(this.options.y+(b-a.height)/2+this.options["line-width"]);this.start.render();d=0;for(e=this.symbols.length;e>
d;d++)a=this.symbols[d],a.renderLines();f=this.maxXFromLine;d=0;for(e=this.symbols.length;e>d;d++)a=this.symbols[d],c=a.getX()+a.width,a=a.getY()+a.height,c>f&&(f=c),a>h&&(h=a);this.paper.setSize(f+this.options["line-width"],h+this.options["line-width"])};A.prototype.clean=function(){if(this.paper){var a=this.paper.canvas;a.parentNode.removeChild(a)}};k.prototype.getAttr=function(a){if(this.chart){var c,b=this.chart.options?this.chart.options[a]:void 0,d=this.chart.options.symbols?this.chart.options.symbols[this.symbolType][a]:
void 0;return this.chart.options.flowstate&&this.chart.options.flowstate[this.flowstate]&&(c=this.chart.options.flowstate[this.flowstate][a]),c||d||b}};k.prototype.initialize=function(){this.group.transform("t"+this.getAttr("line-width")+","+this.getAttr("line-width"));this.width=this.group.getBBox().width;this.height=this.group.getBBox().height};k.prototype.getCenter=function(){return{x:this.getX()+this.width/2,y:this.getY()+this.height/2}};k.prototype.getX=function(){return this.group.getBBox().x};
k.prototype.getY=function(){return this.group.getBBox().y};k.prototype.shiftX=function(a){this.group.transform("t"+(this.getX()+a)+","+this.getY())};k.prototype.setX=function(a){this.group.transform("t"+a+","+this.getY())};k.prototype.shiftY=function(a){this.group.transform("t"+this.getX()+","+(this.getY()+a))};k.prototype.setY=function(a){this.group.transform("t"+this.getX()+","+a)};k.prototype.getTop=function(){var a=this.getY();return{x:this.getX()+this.width/2,y:a}};k.prototype.getBottom=function(){var a=
this.getY()+this.height;return{x:this.getX()+this.width/2,y:a}};k.prototype.getLeft=function(){var a=this.getY()+this.group.getBBox().height/2;return{x:this.getX(),y:a}};k.prototype.getRight=function(){var a=this.getY()+this.group.getBBox().height/2;return{x:this.getX()+this.group.getBBox().width,y:a}};k.prototype.render=function(){if(this.next){var a=this.getAttr("line-length");if("right"===this.next_direction){var c=this.getRight();if(this.next.getLeft(),!this.next.isPositioned){this.next.setY(c.y-
this.next.height/2);this.next.shiftX(this.group.getBBox().x+this.width+a);var b=this;!function e(){for(var c,h=!1,l=0,q=b.chart.symbols.length;q>l;l++){c=b.chart.symbols[l];var n=Math.abs(c.getCenter().x-b.next.getCenter().x);if(c.getCenter().y>b.next.getCenter().y&&n<=b.next.width/2){h=!0;break}}h&&(b.next.setX(c.getX()+c.width+a),e())}();this.next.isPositioned=!0;this.next.render()}}else c=this.getBottom(),this.next.getTop(),this.next.isPositioned||(this.next.shiftY(this.getY()+this.height+a),this.next.setX(c.x-
this.next.width/2),this.next.isPositioned=!0,this.next.render())}};k.prototype.renderLines=function(){this.next&&(this.next_direction?this.drawLineTo(this.next,"",this.next_direction):this.drawLineTo(this.next))};k.prototype.drawLineTo=function(a,c,b){0>this.connectedTo.indexOf(a)&&this.connectedTo.push(a);var d,e=this.getCenter().x,f=this.getCenter().y,h=(this.getTop(),this.getRight()),l=this.getBottom(),q=this.getLeft(),n=a.getCenter().x,k=a.getCenter().y,g=a.getTop(),C=a.getRight(),y=(a.getBottom(),
a.getLeft()),w=e===n,r=f===k,F=k>f,f=f>k,k=e>n,v=n>e,n=0,m=this.getAttr("line-length"),e=this.getAttr("line-width");b&&"bottom"!==b||!w||!F?b&&"right"!==b||!r||!v?b&&"left"!==b||!r||!k?b&&"right"!==b||!w||!f?b&&"right"!==b||!w||!F?b&&"bottom"!==b||!k?b&&"bottom"!==b||!v?b&&"right"===b&&k?(d=x(this.chart,h,[{x:h.x+m/2,y:h.y},{x:h.x+m/2,y:g.y-m/2},{x:g.x,y:g.y-m/2},{x:g.x,y:g.y}],c),this.rightStart=!0,a.topEnd=!0,n=h.x+m/2):b&&"right"===b&&v?(d=x(this.chart,h,[{x:g.x,y:h.y},{x:g.x,y:g.y}],c),this.rightStart=
!0,a.topEnd=!0,n=h.x+m/2):b&&"bottom"===b&&w&&f?(d=x(this.chart,l,[{x:l.x,y:l.y+m/2},{x:h.x+m/2,y:l.y+m/2},{x:h.x+m/2,y:g.y-m/2},{x:g.x,y:g.y-m/2},{x:g.x,y:g.y}],c),this.bottomStart=!0,a.topEnd=!0,n=l.x+m/2):"left"===b&&w&&f?(d=q.x-m/2,y.x<q.x&&(d=y.x-m/2),d=x(this.chart,q,[{x:d,y:q.y},{x:d,y:g.y-m/2},{x:g.x,y:g.y-m/2},{x:g.x,y:g.y}],c),this.leftStart=!0,a.topEnd=!0,n=q.x):"left"===b&&(d=x(this.chart,q,[{x:g.x+(q.x-g.x)/2,y:q.y},{x:g.x+(q.x-g.x)/2,y:g.y-m/2},{x:g.x,y:g.y-m/2},{x:g.x,y:g.y}],c),this.leftStart=
!0,a.topEnd=!0,n=q.x):(d=x(this.chart,l,[{x:l.x,y:l.y+m/2},{x:l.x+(l.x-g.x)/2,y:l.y+m/2},{x:l.x+(l.x-g.x)/2,y:g.y-m/2},{x:g.x,y:g.y-m/2},{x:g.x,y:g.y}],c),this.bottomStart=!0,a.topEnd=!0,n=l.x+(l.x-g.x)/2):(d=this.leftEnd&&f?x(this.chart,l,[{x:l.x,y:l.y+m/2},{x:l.x+(l.x-g.x)/2,y:l.y+m/2},{x:l.x+(l.x-g.x)/2,y:g.y-m/2},{x:g.x,y:g.y-m/2},{x:g.x,y:g.y}],c):x(this.chart,l,[{x:l.x,y:g.y-m/2},{x:g.x,y:g.y-m/2},{x:g.x,y:g.y}],c),this.bottomStart=!0,a.topEnd=!0,n=l.x+(l.x-g.x)/2):(d=x(this.chart,h,[{x:h.x+
m/2,y:h.y},{x:h.x+m/2,y:g.y-m/2},{x:g.x,y:g.y-m/2},{x:g.x,y:g.y}],c),this.rightStart=!0,a.topEnd=!0,n=h.x+m/2):(d=x(this.chart,h,[{x:h.x+m/2,y:h.y},{x:h.x+m/2,y:g.y-m/2},{x:g.x,y:g.y-m/2},{x:g.x,y:g.y}],c),this.rightStart=!0,a.topEnd=!0,n=h.x+m/2):(d=x(this.chart,q,C,c),this.leftStart=!0,a.rightEnd=!0,n=C.x):(d=x(this.chart,h,y,c),this.rightStart=!0,a.leftEnd=!0,n=y.x):(d=x(this.chart,l,g,c),this.bottomStart=!0,a.topEnd=!0,n=l.x);if(d){a=0;for(c=this.chart.lines.length;c>a;a++)for(q=this.chart.lines[a].attr("path"),
g=d.attr("path"),y=0,b=q.length-1;b>y;y++)for(w=[],w.push(["M",q[y][1],q[y][2]]),w.push(["L",q[y+1][1],q[y+1][2]]),h=w[0][1],l=w[0][2],C=w[1][1],w=w[1][2],r=0,F=g.length-1;F>r;r++){v=[];v.push(["M",g[r][1],g[r][2]]);v.push(["L",g[r+1][1],g[r+1][2]]);var f=v[0][1],k=v[0][2],m=v[1][1],v=v[1][2],p;p=l;var I=w,G=void 0,B=void 0,t=void 0,z=void 0,A=void 0,D={x:null,y:null,onLine1:!1,onLine2:!1};p=(G=(v-k)*(C-h)-(m-f)*(I-p),0===G?D:(B=p-k,t=h-f,z=(m-f)*B-(v-k)*t,A=(C-h)*B-(I-p)*t,B=z/G,t=A/G,D.x=h+B*(C-
h),D.y=p+B*(I-p),0<B&&1>B&&(D.onLine1=!0),0<t&&1>t&&(D.onLine2=!0),D));if(p.onLine1&&p.onLine2){var u;k===v?f>m?(u=["L",p.x+2*e,k],g.splice(r+1,0,u),u=["C",p.x+2*e,k,p.x,k-4*e,p.x-2*e,k],g.splice(r+2,0,u),d.attr("path",g)):(u=["L",p.x-2*e,k],g.splice(r+1,0,u),u=["C",p.x-2*e,k,p.x,k-4*e,p.x+2*e,k],g.splice(r+2,0,u),d.attr("path",g)):k>v?(u=["L",f,p.y+2*e],g.splice(r+1,0,u),u=["C",f,p.y+2*e,f+4*e,p.y,f,p.y-2*e],g.splice(r+2,0,u),d.attr("path",g)):(u=["L",f,p.y-2*e],g.splice(r+1,0,u),u=["C",f,p.y-2*
e,f+4*e,p.y,f,p.y+2*e],g.splice(r+2,0,u),d.attr("path",g));r+=2}}this.chart.lines.push(d)}(!this.chart.maxXFromLine||this.chart.maxXFromLine&&n>this.chart.maxXFromLine)&&(this.chart.maxXFromLine=n)};t.inherits(L,k);t.inherits(M,k);t.inherits(N,k);t.inherits(O,k);t.inherits(E,k);E.prototype.getLeft=function(){var a=this.getY()+this.group.getBBox().height/2;return{x:this.getX()+this.textMargin,y:a}};E.prototype.getRight=function(){var a=this.getY()+this.group.getBBox().height/2;return{x:this.getX()+
this.group.getBBox().width-this.textMargin,y:a}};t.inherits(z,k);z.prototype.render=function(){this.yes_direction&&(this[this.yes_direction+"_symbol"]=this.yes_symbol);this.no_direction&&(this[this.no_direction+"_symbol"]=this.no_symbol);var a=this.getAttr("line-length");if(this.bottom_symbol){var c=this.getBottom();this.bottom_symbol.getTop();this.bottom_symbol.isPositioned||(this.bottom_symbol.shiftY(this.getY()+this.height+a),this.bottom_symbol.setX(c.x-this.bottom_symbol.width/2),this.bottom_symbol.isPositioned=
!0,this.bottom_symbol.render())}if(this.right_symbol&&(c=this.getRight(),this.right_symbol.getLeft(),!this.right_symbol.isPositioned)){this.right_symbol.setY(c.y-this.right_symbol.height/2);this.right_symbol.shiftX(this.group.getBBox().x+this.width+a);var b=this;!function e(){for(var c,h=!1,l=0,k=b.chart.symbols.length;k>l;l++){c=b.chart.symbols[l];var n=Math.abs(c.getCenter().x-b.right_symbol.getCenter().x);if(c.getCenter().y>b.right_symbol.getCenter().y&&n<=b.right_symbol.width/2){h=!0;break}}h&&
(b.right_symbol.setX(c.getX()+c.width+a),e())}();this.right_symbol.isPositioned=!0;this.right_symbol.render()}};z.prototype.renderLines=function(){this.yes_symbol&&this.drawLineTo(this.yes_symbol,this.getAttr("yes-text"),this.yes_direction);this.no_symbol&&this.drawLineTo(this.no_symbol,this.getAttr("no-text"),this.no_direction)};H.parse=function(a){function c(a){var b=a.indexOf("(")+1,c=a.indexOf(")");return 0<=b&&0<=c?d.symbols[a.substring(0,b-1)]:d.symbols[a]}function b(a){var b="next",c=a.indexOf("(")+
1;a=a.indexOf(")");return 0<=c&&0<=a&&(b=t.substring(c,a),0>b.indexOf(",")&&"yes"!==b&&"no"!==b&&(b="next, "+b)),b}a=(a||"").trim();for(var d={symbols:{},start:null,drawSVG:function(a,b){var c=this;this.diagram&&this.diagram.clean();var d=new A(a,b);this.diagram=d;var e={};!function m(a,b,g){var f;a:{if(!e[a.key])switch(a.symbolType){case "start":e[a.key]=new L(d,a);break;case "end":e[a.key]=new M(d,a);break;case "operation":e[a.key]=new N(d,a);break;case "inputoutput":e[a.key]=new E(d,a);break;case "subroutine":e[a.key]=
new O(d,a);break;case "condition":e[a.key]=new z(d,a);break;default:f=Error("Wrong symbol type!");break a}f=e[a.key]}return c.start===a?d.startWith(f):b&&g&&!b.pathOk&&(b instanceof z?(g.yes===a&&b.yes(f),g.no===a&&b.no(f)):b.then(f)),f.pathOk?f:(f instanceof z?(a.yes&&m(a.yes,f,a),a.no&&m(a.no,f,a)):a.next&&m(a.next,f,a),f)}(this.start);d.render()},clean:function(){this.diagram.clean()}},e=[],f=0,h=1,l=a.length;l>h;h++)if("\n"===a[h]&&"\\"!==a[h-1]){var k=a.substring(f,h),f=h+1;e.push(k.replace(/\\\n/g,
"\n"))}f<a.length&&e.push(a.substr(f));a=1;for(f=e.length;f>a;)h=e[a],0>h.indexOf(": ")&&0>h.indexOf("(")&&0>h.indexOf(")")&&0>h.indexOf("->")&&0>h.indexOf("=>")?(e[a-1]+="\n"+h,e.splice(a,1),f--):a++;for(;0<e.length;)if(a=e.splice(0,1)[0],0<=a.indexOf("=>")){var n;a=a.split("=>");a={key:a[0],symbolType:a[1],text:null,link:null,target:null,flowstate:null};if(0<=a.symbolType.indexOf(": ")&&(n=a.symbolType.split(": "),a.symbolType=n[0],a.text=n[1]),a.text&&0<=a.text.indexOf(":>")?(n=a.text.split(":>"),
a.text=n[0],a.link=n[1]):0<=a.symbolType.indexOf(":>")&&(n=a.symbolType.split(":>"),a.symbolType=n[0],a.link=n[1]),0<=a.symbolType.indexOf("\n")&&(a.symbolType=a.symbolType.split("\n")[0]),a.link)f=a.link.indexOf("[")+1,h=a.link.indexOf("]"),0<=f&&0<=h&&(a.target=a.link.substring(f,h),a.link=a.link.substring(0,f-1));a.text&&0<=a.text.indexOf("|")&&(f=a.text.split("|"),a.text=f[0],a.flowstate=f[1].trim());d.symbols[a.key]=a}else if(0<=a.indexOf("->"))for(a=a.split("->"),f=0,h=a.length;h>f;f++){var t=
a[f],l=c(t),k=b(t),g=null;0<=k.indexOf(",")&&(g=k.split(","),k=g[0],g=g[1].trim());if(d.start||(d.start=l),h>f+1)l[k]=c(a[f+1]),l["direction_"+k]=g,g=null}return d}}();