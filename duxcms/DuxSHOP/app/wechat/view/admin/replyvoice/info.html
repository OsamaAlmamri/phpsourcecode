<div class="dux-page-header uk-clearfix">
    <div class="page-title">
        <a class="uk-button uk-button-primary" href="{url('index')}"> 规则列表</a>
    </div>
    <div class="page-action">
        <a class="uk-button uk-button-danger" href="javascript:location.reload();"><i class="fa fa-refresh"></i></a>
    </div>
</div>

<div class="uk-margin-top">
    <div class="uk-card uk-card-default uk-card-small dux-panel">
        <div class="uk-card-header">{$assignName}规则</div>
        <div class="uk-card-body">
            <form class="dux-form uk-form   uk-form-horizontal " data-dux="form-bind" method="post">
                <fieldset>
                    <div class="uk-form-group">
                        <label class=" uk-form-label">规则名称</label>
                        <div class="uk-form-controls">
                            <input type="text" name="name" value="{$info.name}" placeholder="请输入规则名称" required>
                        </div>
                    </div>

                    <div class="uk-form-group">
                        <label class=" uk-form-label">优先级</label>
                        <div class="uk-form-controls">
                            <input type="number" name="priority" value="{$info.priority ? $info.priority : 0}">
                            <div class="uk-form-help">优先级越高越容易触发</div>
                        </div>
                    </div>


                    <div class="uk-form-group">
                        <label class=" uk-form-label">触发关键词</label>
                        <div class="uk-form-controls">
                            <input type="text" name="keywords" value="{$info.keywords}" placeholder="多个规格请用,分割" data-dux="form-tags">
                        </div>
                    </div>

                    <div class="uk-form-group">
                        <label class=" uk-form-label">匹配类型</label>
                        <div class="uk-form-controls uk-form-controls-text"><div class="uk-grid">
                            <label>
                                <!--if{!$info['match']}-->
                                <input name="match" value="0" checked="checked" type="radio">
                                <!--{else}-->
                                <input name="match" value="0" type="radio">
                                <!--{/if}-->
                                精确匹配
                            </label>
                            <label>
                                <!--if{$info['match']}-->
                                <input name="match" checked="checked" value="1" type="radio">
                                <!--{else}-->
                                <input name="match" value="1" type="radio">
                                <!--{/if}-->
                                模糊匹配
                            </label>
                        </div>
                    </div>

                    </div><div class="uk-form-group">
                        <label class=" uk-form-label">语音素材</label>
                        <div class="uk-form-controls">
                            <button class="uk-button uk-button-primary" type="button" data-dux="dialog-open" data-width="700px" data-height="450px" data-url="{url('wechat/MaterialVoice/dialog')}" data-title="选择素材"><i class="fa fa-file-image-o"></i> 选择语音素材</button>

                            <p></p>
                            <div class="uk-card uk-card-default uk-card-small">
                                <div class="uk-card-header" id="title">{$materialInfo.title ? $materialInfo.title : '未选择语音'}</div>
                                <div class="uk-card-body">
                                    <audio controls="controls"  id="voice">
                                        <source src="{$materialInfo.url}" />
                                    </audio>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="uk-form-group">
                        <div class="uk-form-controls">
                            <input type="hidden" name="type" value="voice">
                            <input type="hidden" name="media_id" id="media_id" value="{$materialInfo.media_id}">
                            <input type="hidden" name="reply_id" value="{$info.reply_id}">
                            <button class="uk-button uk-button-primary" type="submit" disabled>保存</button>
                        </div>
                    </div>

                </fieldset>
            </form>
        </div>
    </div>
</div>



<script>
    Do('base', function() {
        window.selectVoice = function(mediaId, title, url) {
            $('#title').text(title);
            $('#voice').attr('src', url);
            $('#media_id').val(mediaId);
        }
    });
</script>