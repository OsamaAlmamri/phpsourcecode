<?php
function randstr($length) {
	$str = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
	$str = str_shuffle($str);
	return substr($str, 0, $length);
}
$cookieen = randstr(10);
?>
<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="content-type" content="text/html; charset=utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>安装SYBlog</title>
	<link rel="stylesheet" href="/assets/css/materialize.min.css"/>
	<link rel="stylesheet" href="style.css"/>
	<style>body{background-image:url("../assets/image/background/<?=mt_rand(1,8)?>.jpg");background-repeat:no-repeat;background-size:cover}</style>
	<script>window.sy={'env':'index.php?action=envcheck','testdb':'index.php?action=testdb','processing':'index.php?action=processing'}</script>
<body>
	<div id="loading"><div class="preloader-wrapper big active"><div class="spinner-layer spinner-blue"><div class="circle-clipper left"><div class="circle"></div></div><div class="gap-patch"><div class="circle"></div></div><div class="circle-clipper right"><div class="circle"></div></div></div><div class="spinner-layer spinner-red"><div class="circle-clipper left"><div class="circle"></div></div><div class="gap-patch"><div class="circle"></div></div><div class="circle-clipper right"><div class="circle"></div></div></div><div class="spinner-layer spinner-yellow"><div class="circle-clipper left"><div class="circle"></div></div><div class="gap-patch"><div class="circle"></div></div><div class="circle-clipper right"><div class="circle"></div></div></div><div class="spinner-layer spinner-green"><div class="circle-clipper left"><div class="circle"></div></div><div class="gap-patch"><div class="circle"></div></div><div class="circle-clipper right"><div class="circle"></div></div></div></div></div>
	<div id="loading_bg"></div>
	<div id="main" class="modal">
		<div class="modal-content">
			<h3 id="title" class="center-align">SYBlog安装向导</h3>
			<ul id="mainul">
				<li id="license">
					<div class="collapsible-header">许可协议</div>
					<div class="collapsible-body">
						<p>感谢您使用 SYBlog。</p>
						<p>泷涯为 SYBlog 产品的开发者，依法独立拥有 SYBlog 产品著作权。SYBlog 官方网站网址为<a href=" http://blog.sylingd.com" target="_blank">http://blog.sylingd.com</a></p>
						<p>使用者：无论个人或组织、盈利与否、用途如何（包括以学习和研究为目的），均需仔细阅读本协议，在理解、同意、并遵守本协议的全部条款后，方可开始使用。</p>
						<p>泷涯保留对本授权协议的最终解释权。</p>
						<h5>I. 协议许可的权利</h5>
						<ol>
							<li>您可以在完全遵守本最终用户授权协议的基础上，将本软件应用于非商业/商业用途，而不必支付软件版权授权费用。</li>
							<li>您可以在协议规定的约束和限制范围内修改 SYBlog 界面风格以适应您的网站要求。</li>
							<li>您拥有使用本软件构建的网站中全部会员资料、文章及其他信息的所有权，并独立承担与这些内容的相关法律义务。</li>
							<li>您可以基于 SYBlog 进行二次开发，但必须在明显位置声明，且必须遵循GPL2.0协议进行开源。</li>
							<li>您可以将本软件应用于商业用途。</li>
						</ol>
						<h5>II. 协议规定的约束和限制</h5>
						<ol>
							<li>无论如何，即无论用途如何、是否经过修改或美化、修改程度如何，只要使用 SYBlog 的整体或任何部分，未经书面许可，页脚处的 SYBlog 名称和链接都必须保留，而不能清除或修改。</li>
							<li>如果您未能遵守本协议的条款，您的授权将被终止，所被许可的权利将被收回，并承担相应法律责任。 </li>
						</ol>
						<h5>III. 有限担保和免责声明</h5>
						<ol>
							<li>本软件及所附带的文件是作为不提供任何明确的或隐含的赔偿或担保的形式提供的。</li>
							<li>用户出于自愿而使用本软件，您必须了解使用本软件的风险，我们不承诺提供任何形式的技术支持、使用担保，也不承担任何因使用本软件而产生问题的相关责任。</li>
							<li>泷涯不对使用本软件构建的网站中的文章或其他信息承担责任。</li>
						</ol>
						<p>有关 SYBlog 最终用户授权协议、授权与技术服务的详细内容，均由泷涯独家提供。泷涯拥有在不事先通知的情况下，修改授权协议的权力，修改后的协议对自改变之日起的新授权用户生效。</p>
						<p>电子文本形式的授权协议如同双方书面签署的协议一样，具有完全的和等同的法律效力。您一旦开始安装 SYBlog，即被视为完全理解并接受本协议的各项条款，在享有上述条款授予的权力的同时，受到相关的约束和限制。协议许可范围以外的行为，将直接违反本授权协议并构成侵权，我们有权随时终止授权，责令停止损害，并保留追究相关责任的权力。</p>
						<p class="center-align"><input id="license_check" type="checkbox"><label for="license_check">我已阅读并同意以上协议</label></p>
						<p class="center-align"><button id="license_submit" class="waves-effect waves-light btn" disabled>下一步</button></p>
					</div>
				</li>
				<li id="env_check">
					<div class="collapsible-header">环境检查</div>
					<div class="collapsible-body row">
						<div class="col s4">XMLWrite <i id="env_xmlwriter"></i></div>
						<div class="col s4">PDO <i id="env_pdo"></i></div>
						<div class="center-align col s12"><button class="waves-effect waves-light btn prev" data-prev="license">上一步</button><button id="env_submit" class="waves-effect waves-light btn">下一步</button></div>
					</div>
				</li>
				<li id="info">
					<div class="collapsible-header">信息填写</div>
					<div class="collapsible-body row">
						<div class="col s4 input-field">
							<input type="text" name="dbhost" value="localhost"/>
							<label>数据库地址</label>
						</div>
						<div class="col s4 input-field">
							<input type="text" name="dbport" value="3306"/>
							<label>数据库端口</label>
						</div>
						<div class="col s4 input-field">
							<input type="text" name="dbname" value="syblog"/>
							<label>数据库名称</label>
						</div>
						<div class="col s4 input-field">
							<input type="text" name="dbuser" value="root"/>
							<label>数据库用户</label>
						</div>
						<div class="col s4 input-field">
							<input type="text" name="dbpwd"/>
							<label>数据库密码</label>
						</div>
						<div class="col s4 input-field">
							<input type="text" name="dbprefix" value="sy_"/>
							<label>数据表前缀，安装多个SYBlog请修改此处</label>
						</div>
						<div class="col s4 input-field">
							<input type="text" name="password"/>
							<label>初始密码</label>
						</div>
						<div class="col s4 input-field">
							<input type="text" name="cookie" value="<?=$cookieen?>"/>
							<label>Cookie密钥，一般不需要修改</label>
						</div>
						<div class="center-align col s12"><button class="waves-effect waves-light btn prev" data-prev="env_check">上一步</button><button id="info_submit" class="waves-effect waves-light btn">下一步</button></div>
					</div>
				</li>
				<li id="processing">
					<div class="collapsible-header">安装中</div>
					<div class="collapsible-body center-align">
						<button id="processing_submit" class="waves-effect waves-light btn">下一步</button>
					</div>
				</li>
				<li id="finish">
					<div class="collapsible-header">安装完成</div>
					<div class="collapsible-body"><p>Enjoy it!</p></div>
				</li>
			</ul>
		</div>
	</div>
	<script type="text/javascript" src="/assets/js/jquery.min.js"></script>
	<script type="text/javascript" src="/assets/js/materialize.min.js"></script>
	<script type="text/javascript" src="script.js"></script>
</body>