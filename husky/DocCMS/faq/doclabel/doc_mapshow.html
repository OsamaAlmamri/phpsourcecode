<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>doc_mapshow--稻壳网CMS标签文档</title>
<meta name="keywords" content="稻壳CMS，稻壳CMS标签，稻壳CMS模版" />
<meta name="description" content="稻壳CMS官方标签文档。稻壳CMS官方网站www.doccms.com" />
<meta name="author" content="doccms：www.weibo.com/doccms">
<link rel="stylesheet" href="../img/help.css" type="text/css" />
<script src="../img/jquery-1.7.2.min.js"></script>
<script src="../img/jquery.easing.1.3.js"></script>
<script src="../img/common.js"></script>
</head>
<body>
<div class="top">
	<div class="header">
		<a href="http://www.doccms.com/faq/" target="_blank" title="稻壳网帮助中心"><img src="../img/doooc_logo.png" class="logo" /></a><span id="lab">标签文档 X1.0<sub>[本标签文档适用于稻壳平台多用户版和稻壳CMS X1.0]</sub></span>
	</div>
</div>
<div id="bd">
	<div class="left">
		<div class="sidenav">
			<h2>稻壳CMS标签文档</h2>
            <ul class="subnav"></ul>
			<h4></h4>
		</div>
	</div>
<div class="right">
		<h2><a href="../default.html">标签首页</a>&gt;&gt;<a href="index.html">@模块应用、调用标签</a>&gt;&gt;<a href="#">doc_mapshow</a></h2>
		<h3 class="how">1、首页地图展示模块的栏目数据调用标签</h3>
<!--功能说明开始-->
<fieldset>
<legend>功能说明：</legend>
<p>此标签主要在模板index.php和common.php(包含自定义单独common页) 中html代码部分输出要调用的地图展示模块的数据.</p>
</fieldset>		
<!--功能说明结束-->
<label>代码示例</label>
<!--code代码的样式开始-->
<div class="blockcode">
<ol>
<li>&lt;?php doc_mapshow($channelId=0,$style=0,$strcount=0,$strcount1=0,$isellipsis=true,$hastag=false) ?&gt;</li>
<li></li>
<li>&lt;?php doc_mapshow( ) ?&gt;</li>
<li></li>
<li>&lt;?php doc_mapshow(1,0,0,0,true,false) ?&gt;</li>
</ol>
</div>
<!--code代码的样式结束-->
<hr />
<label>参数说明</label>
<div class="param">
   <ul>
     <li><b>$channelId：</b>调用频道或栏目ID；</li>
     <li><b>$style：</b>调用文件名为mapshow_0、mapshow_1、mapshow_2……的php样式文件，其保存于模板下的index/mapshow/文件夹下，表示地图展示数据的不同显示样式，$style为下载不同显示样式文件的数字后缀。</li>
     <li><b>$strcount：</b>指定地图展示标题的显示字符数量；</li>
     <li><b>$strcount1：</b>指定地图展示描述的显示字符数量；</li>
     <li></li>
     <li><b>$isEllipsis：</b>指定地图展示字符末尾是否显示省略号，当<span lang="EN-US" xml:lang="EN-US">$isEllipsis</span>为<span lang="EN-US" xml:lang="EN-US">false</span>或<span lang="EN-US" xml:lang="EN-US">$isEllipsis</span>为<span lang="EN-US" xml:lang="EN-US">true</span>且<span lang="EN-US" xml:lang="EN-US">$strcount</span>大于标题字数时不显示省略号，当<span lang="EN-US" xml:lang="EN-US">$isEllipsis</span>为<span lang="EN-US" xml:lang="EN-US">true</span>且<span lang="EN-US" xml:lang="EN-US">$strcount</span>小于标题字数时则显示省略号;</li>
     <li><b>$hastag：</b>指定调用的地图展示内容是否保留HTML 标记；</li>
   </ul>
</div>
<label>标签样式文件代码示例一</label>
<!--code代码的样式开始-->
<div class="blockcode">
<ol>
<li>&lt;style type=&quot;text/css&quot;&gt;<br />
  #allmap {width: 100%;height: 450px;overflow: hidden;margin:0;}<br />
  #l-map{height:&lt;?php echo $data['height']?$data['height']:'450px';?&gt;;width:&lt;?php echo $data['width']?$data['width']:'100%';?&gt;;float:left;border-right:2px solid #bcbcbc;}<br />
  &lt;/style&gt;<br />
  &lt;script type=&quot;text/javascript&quot; src=&quot;http://api.map.baidu.com/api?v=1.3&quot;&gt;&lt;/script&gt;<br />
  &lt;div id=&quot;l-map&quot;&gt;&lt;/div&gt;<br />
  &lt;script type=&quot;text/javascript&quot;&gt;<br />
  var map = new BMap.Map(&quot;l-map&quot;);<br />
  var point = new BMap.Point(&lt;?php echo empty($data['lng'])?'116.404':$data['lng'] ?&gt;,&lt;?php echo empty($data['lat'])?'39.915':$data['lat'] ?&gt;);<br />
  map.centerAndZoom(point, 12);<br />
  var marker = new BMap.Marker(point);  // 创建标注<br />
  map.addOverlay(marker);              // 将标注添加到地图中<br />
  map.addControl(new BMap.NavigationControl());  //添加默认缩放平移控件<br />
  map.addControl(new BMap.NavigationControl({anchor: BMAP_ANCHOR_TOP_RIGHT, type: BMAP_NAVIGATION_CONTROL_SMALL}));  //右上角，仅包含平移和缩放按钮<br />
  map.addControl(new BMap.NavigationControl({anchor: BMAP_ANCHOR_BOTTOM_LEFT, type: BMAP_NAVIGATION_CONTROL_PAN}));  //左下角，仅包含平移按钮<br />
  map.addControl(new BMap.NavigationControl({anchor: BMAP_ANCHOR_BOTTOM_RIGHT, type: BMAP_NAVIGATION_CONTROL_ZOOM}));  //右下角，仅包含缩放按钮<br />
  map.enableScrollWheelZoom();    //启用滚轮放大缩小，默认禁用<br />
  map.centerAndZoom(point, 15);<br />
  var opts = {<br />
width : 250,     // 信息窗口宽度<br />
height: 100,     // 信息窗口高度<br />
title : '&lt;b&gt;公司名称：&lt;/b&gt;&lt;?php echo $data['title']?&gt;&lt;br&gt;&lt;b&gt;联系电话：&lt;/b&gt;&lt;?php echo $data['phone']?&gt;&lt;br&gt;&lt;b&gt;公司地址：&lt;/b&gt;&lt;?php echo $data['address']?&gt;'  // 信息窗口标题<br />
}<br />
var infoWindow = new BMap.InfoWindow('', opts);  // 创建信息窗口对象<br />
map.openInfoWindow(infoWindow,point); //开启信息窗口<br />
marker.addEventListener(&quot;click&quot;, function(){ <br />
this.openInfoWindow(infoWindow);<br />
//图片加载完毕重绘infowindow<br />
});<br />
&lt;/script&gt;<br />
&lt;?php echo stripslashes($data['content']); ?&gt;</li>
</ol>
</div>
<p>
  <label>样例展示</label>
</p>
<img src="../img/doclabel/mapshow.jpg" />
<div class="clr"></div>
<!--虚划线-->
<div class="clr"></div>
<label>备注说明</label>
<!--备注开始-->
<div class="strong">备注：此标签支持系统后台可视化标签管理，即可在制作模板时仅写标签名称，不写参数(例如:&lt;?php doc_mapshow( ) ?&gt;)，模板完成后进入后台 构建网站->模板管理->标签可视化管理 中设置标签的具体参数。【责任编辑：<a href="http://weibo.com/grysoft" target="_blank">grysoft</a>】</div>
<!--备注结束-->
  </div>
</div>
<div class="footer">&#169; 2012 <a href="http://www.doccms.com" target="_blank">稻壳网CMS</a></div>
</body>
</html>
